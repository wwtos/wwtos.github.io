import{S as de,i as he,s as ve,C as br,D as Er,E as Ir,F as Sr,g as z,d as Z,H as kt,q as te,r as ne,b as R,u as ke,h as m,a8 as se,a9 as ue,m as y,n as h,Q as _,V as H,k as S,y as re,a as Q,l as M,z as ie,c as $,p as F,P as le,A as oe,R as L,B as ae,T as _e,G as Ye,aa as ge,ab as Ee,ac as Ze,_ as Pe,ad as zn,v as ye,f as be,e as ce,ae as Je,w as st,af as Mr,o as Ln,M as Fn,Y as Wn,Z as qn,ag as Nr,a4 as Zn,ah as Yn,ai as Gt,aj as Dr,ak as Tr}from"../chunks/index.ace4def9.js";import"../chunks/paths.dc351bbe.js";import{g as Cr,l as Or}from"../chunks/SideNavbar.svelte_svelte_type_style_lang.2c46f53d.js";import{a as wt,d as _t,m as yt,b as Ar,B as Br}from"../chunks/index.109bab44.js";const Vr=r=>({text:r&1,attrs:r&1}),Kt=r=>({text:r[0].value,attrs:r[0].attributes});function Rr(r){let e=r[0].value+"",t;return{c(){t=te(e)},l(n){t=ne(n,e)},m(n,o){R(n,t,o)},p(n,o){o&1&&e!==(e=n[0].value+"")&&ke(t,e)},d(n){n&&m(t)}}}function Pr(r){let e;const t=r[5].default,n=br(t,r,r[4],Kt),o=n||Rr(r);return{c(){o&&o.c()},l(i){o&&o.l(i)},m(i,a){o&&o.m(i,a),e=!0},p(i,[a]){n?n.p&&(!e||a&17)&&Er(n,t,i,i[4],e?Sr(t,i[4],a,Vr):Ir(i[4]),Kt):o&&o.p&&(!e||a&1)&&o.p(i,e?a:-1)},i(i){e||(z(o,i),e=!0)},o(i){Z(o,i),e=!1},d(i){o&&o.d(i)}}}function zr(r,e,t){let n,o;kt(r,Cr,l=>t(3,o=l));let{$$slots:i={},$$scope:a}=e,{id:s}=e,{args:u=void 0}=e;return r.$$set=l=>{"id"in l&&t(1,s=l.id),"args"in l&&t(2,u=l.args),"$$scope"in l&&t(4,a=l.$$scope)},r.$$.update=()=>{r.$$.dirty&14&&t(0,n=o(s,u))},[n,s,u,o,a,i]}class Lr extends de{constructor(e){super(),he(this,e,zr,Pr,ve,{id:1,args:2})}}function Fr(r){let e,t,n;return{c(){e=se("svg"),t=se("path"),this.h()},l(o){e=ue(o,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var i=y(e);t=ue(i,"path",{d:!0}),y(t).forEach(m),i.forEach(m),this.h()},h(){h(t,"d","M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"width",r[0]),h(e,"height",r[0]),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"stroke","currentColor"),h(e,"stroke-width",r[1]),h(e,"stroke-linecap","round"),h(e,"stroke-linejoin","round"),h(e,"class",n="feather feather-folder "+r[2])},m(o,i){R(o,e,i),_(e,t)},p(o,[i]){i&1&&h(e,"width",o[0]),i&1&&h(e,"height",o[0]),i&2&&h(e,"stroke-width",o[1]),i&4&&n!==(n="feather feather-folder "+o[2])&&h(e,"class",n)},i:H,o:H,d(o){o&&m(e)}}}function Wr(r,e,t){let{size:n="24"}=e,{strokeWidth:o=2}=e,{class:i=""}=e;return n!=="100%"&&(n=n.slice(-1)==="x"?n.slice(0,n.length-1)+"em":parseInt(n)+"px"),r.$$set=a=>{"size"in a&&t(0,n=a.size),"strokeWidth"in a&&t(1,o=a.strokeWidth),"class"in a&&t(2,i=a.class)},[n,o,i]}class qr extends de{constructor(e){super(),he(this,e,Wr,Fr,ve,{size:0,strokeWidth:1,class:2})}}function Zr(r){let e,t,n,o,i,a;return{c(){e=se("svg"),t=se("circle"),n=se("circle"),o=se("path"),i=se("line"),this.h()},l(s){e=ue(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var u=y(e);t=ue(u,"circle",{cx:!0,cy:!0,r:!0}),y(t).forEach(m),n=ue(u,"circle",{cx:!0,cy:!0,r:!0}),y(n).forEach(m),o=ue(u,"path",{d:!0}),y(o).forEach(m),i=ue(u,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),y(i).forEach(m),u.forEach(m),this.h()},h(){h(t,"cx","18"),h(t,"cy","18"),h(t,"r","3"),h(n,"cx","6"),h(n,"cy","6"),h(n,"r","3"),h(o,"d","M13 6h3a2 2 0 0 1 2 2v7"),h(i,"x1","6"),h(i,"y1","9"),h(i,"x2","6"),h(i,"y2","21"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"width",r[0]),h(e,"height",r[0]),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"stroke","currentColor"),h(e,"stroke-width",r[1]),h(e,"stroke-linecap","round"),h(e,"stroke-linejoin","round"),h(e,"class",a="feather feather-git-pull-request "+r[2])},m(s,u){R(s,e,u),_(e,t),_(e,n),_(e,o),_(e,i)},p(s,[u]){u&1&&h(e,"width",s[0]),u&1&&h(e,"height",s[0]),u&2&&h(e,"stroke-width",s[1]),u&4&&a!==(a="feather feather-git-pull-request "+s[2])&&h(e,"class",a)},i:H,o:H,d(s){s&&m(e)}}}function Yr(r,e,t){let{size:n="24"}=e,{strokeWidth:o=2}=e,{class:i=""}=e;return n!=="100%"&&(n=n.slice(-1)==="x"?n.slice(0,n.length-1)+"em":parseInt(n)+"px"),r.$$set=a=>{"size"in a&&t(0,n=a.size),"strokeWidth"in a&&t(1,o=a.strokeWidth),"class"in a&&t(2,i=a.class)},[n,o,i]}class xr extends de{constructor(e){super(),he(this,e,Yr,Zr,ve,{size:0,strokeWidth:1,class:2})}}function Gr(r){let e,t,n,o,i;return{c(){e=se("svg"),t=se("polygon"),n=se("polyline"),o=se("polyline"),this.h()},l(a){e=ue(a,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var s=y(e);t=ue(s,"polygon",{points:!0}),y(t).forEach(m),n=ue(s,"polyline",{points:!0}),y(n).forEach(m),o=ue(s,"polyline",{points:!0}),y(o).forEach(m),s.forEach(m),this.h()},h(){h(t,"points","12 2 2 7 12 12 22 7 12 2"),h(n,"points","2 17 12 22 22 17"),h(o,"points","2 12 12 17 22 12"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"width",r[0]),h(e,"height",r[0]),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"stroke","currentColor"),h(e,"stroke-width",r[1]),h(e,"stroke-linecap","round"),h(e,"stroke-linejoin","round"),h(e,"class",i="feather feather-layers "+r[2])},m(a,s){R(a,e,s),_(e,t),_(e,n),_(e,o)},p(a,[s]){s&1&&h(e,"width",a[0]),s&1&&h(e,"height",a[0]),s&2&&h(e,"stroke-width",a[1]),s&4&&i!==(i="feather feather-layers "+a[2])&&h(e,"class",i)},i:H,o:H,d(a){a&&m(e)}}}function Kr(r,e,t){let{size:n="24"}=e,{strokeWidth:o=2}=e,{class:i=""}=e;return n!=="100%"&&(n=n.slice(-1)==="x"?n.slice(0,n.length-1)+"em":parseInt(n)+"px"),r.$$set=a=>{"size"in a&&t(0,n=a.size),"strokeWidth"in a&&t(1,o=a.strokeWidth),"class"in a&&t(2,i=a.class)},[n,o,i]}class jr extends de{constructor(e){super(),he(this,e,Kr,Gr,ve,{size:0,strokeWidth:1,class:2})}}function Ur(r){let e,t,n,o;return{c(){e=se("svg"),t=se("circle"),n=se("path"),this.h()},l(i){e=ue(i,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var a=y(e);t=ue(a,"circle",{cx:!0,cy:!0,r:!0}),y(t).forEach(m),n=ue(a,"path",{d:!0}),y(n).forEach(m),a.forEach(m),this.h()},h(){h(t,"cx","12"),h(t,"cy","12"),h(t,"r","3"),h(n,"d","M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"width",r[0]),h(e,"height",r[0]),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"stroke","currentColor"),h(e,"stroke-width",r[1]),h(e,"stroke-linecap","round"),h(e,"stroke-linejoin","round"),h(e,"class",o="feather feather-settings "+r[2])},m(i,a){R(i,e,a),_(e,t),_(e,n)},p(i,[a]){a&1&&h(e,"width",i[0]),a&1&&h(e,"height",i[0]),a&2&&h(e,"stroke-width",i[1]),a&4&&o!==(o="feather feather-settings "+i[2])&&h(e,"class",o)},i:H,o:H,d(i){i&&m(e)}}}function Xr(r,e,t){let{size:n="24"}=e,{strokeWidth:o=2}=e,{class:i=""}=e;return n!=="100%"&&(n=n.slice(-1)==="x"?n.slice(0,n.length-1)+"em":parseInt(n)+"px"),r.$$set=a=>{"size"in a&&t(0,n=a.size),"strokeWidth"in a&&t(1,o=a.strokeWidth),"class"in a&&t(2,i=a.class)},[n,o,i]}class Hr extends de{constructor(e){super(),he(this,e,Xr,Ur,ve,{size:0,strokeWidth:1,class:2})}}function Jr(r){let e,t,n,o,i,a,s,u,l,c,f,p,d,g,N,E,B,V,Y,k,W,A,P,O,I;return s=new xr({props:{size:"30",strokeWidth:1.5}}),p=new jr({props:{size:"30",strokeWidth:1.5}}),B=new qr({props:{size:"30",strokeWidth:1.5}}),A=new Hr({props:{size:"30",strokeWidth:1.5}}),{c(){e=S("nav"),t=S("div"),n=S("ul"),o=S("li"),i=S("a"),a=S("span"),re(s.$$.fragment),u=Q(),l=S("li"),c=S("a"),f=S("span"),re(p.$$.fragment),d=Q(),g=S("li"),N=S("a"),E=S("span"),re(B.$$.fragment),V=Q(),Y=S("li"),k=S("a"),W=S("span"),re(A.$$.fragment),this.h()},l(C){e=M(C,"NAV",{style:!0,class:!0});var K=y(e);t=M(K,"DIV",{});var J=y(t);n=M(J,"UL",{class:!0});var j=y(n);o=M(j,"LI",{class:!0});var me=y(o);i=M(me,"A",{href:!0,class:!0});var Oe=y(i);a=M(Oe,"SPAN",{style:!0});var Ae=y(a);ie(s.$$.fragment,Ae),Ae.forEach(m),Oe.forEach(m),me.forEach(m),u=$(j),l=M(j,"LI",{class:!0});var pe=y(l);c=M(pe,"A",{href:!0,class:!0});var Be=y(c);f=M(Be,"SPAN",{style:!0});var Ie=y(f);ie(p.$$.fragment,Ie),Ie.forEach(m),Be.forEach(m),pe.forEach(m),d=$(j),g=M(j,"LI",{class:!0});var Me=y(g);N=M(Me,"A",{href:!0,class:!0});var Ne=y(N);E=M(Ne,"SPAN",{style:!0});var De=y(E);ie(B.$$.fragment,De),De.forEach(m),Ne.forEach(m),Me.forEach(m),V=$(j),Y=M(j,"LI",{class:!0});var D=y(Y);k=M(D,"A",{href:!0,class:!0});var q=y(k);W=M(q,"SPAN",{style:!0});var x=y(W);ie(A.$$.fragment,x),x.forEach(m),q.forEach(m),D.forEach(m),j.forEach(m),J.forEach(m),K.forEach(m),this.h()},h(){F(a,"padding-left","2px"),h(i,"href",null),h(i,"class","svelte-ueglx6"),h(o,"class","svelte-ueglx6"),le(o,"active",r[0]==="nodeEditor"),F(f,"padding-left","2px"),h(c,"href",null),h(c,"class","svelte-ueglx6"),h(l,"class","svelte-ueglx6"),le(l,"active",r[0]==="uiEditor"),F(E,"padding-left","2px"),h(N,"href",null),h(N,"class","svelte-ueglx6"),h(g,"class","svelte-ueglx6"),le(g,"active",r[0]==="fileEditor"),F(W,"padding-left","2px"),h(k,"href",null),h(k,"class","svelte-ueglx6"),h(Y,"class","svelte-ueglx6"),le(Y,"active",r[0]==="settings"),h(n,"class","svelte-ueglx6"),F(e,"min-width",r[1]+"px"),h(e,"class","svelte-ueglx6")},m(C,K){R(C,e,K),_(e,t),_(t,n),_(n,o),_(o,i),_(i,a),oe(s,a,null),_(n,u),_(n,l),_(l,c),_(c,f),oe(p,f,null),_(n,d),_(n,g),_(g,N),_(N,E),oe(B,E,null),_(n,V),_(n,Y),_(Y,k),_(k,W),oe(A,W,null),P=!0,O||(I=[L(i,"mousedown",r[2]("nodeEditor")),L(c,"mousedown",r[2]("uiEditor")),L(N,"mousedown",r[2]("fileEditor")),L(k,"mousedown",r[2]("settings"))],O=!0)},p(C,[K]){(!P||K&1)&&le(o,"active",C[0]==="nodeEditor"),(!P||K&1)&&le(l,"active",C[0]==="uiEditor"),(!P||K&1)&&le(g,"active",C[0]==="fileEditor"),(!P||K&1)&&le(Y,"active",C[0]==="settings"),(!P||K&2)&&F(e,"min-width",C[1]+"px")},i(C){P||(z(s.$$.fragment,C),z(p.$$.fragment,C),z(B.$$.fragment,C),z(A.$$.fragment,C),P=!0)},o(C){Z(s.$$.fragment,C),Z(p.$$.fragment,C),Z(B.$$.fragment,C),Z(A.$$.fragment,C),P=!1},d(C){C&&m(e),ae(s),ae(p),ae(B),ae(A),O=!1,_e(I)}}}function Qr(r,e,t){let{section:n}=e;const o=Ye();function i(s){return()=>{o("click",s)}}let{width:a=48}=e;return r.$$set=s=>{"section"in s&&t(0,n=s.section),"width"in s&&t(1,a=s.width)},[n,a,i]}class $r extends de{constructor(e){super(),he(this,e,Qr,Jr,ve,{section:0,width:1})}}function jt(r,e,t){const n=r.slice();return n[13]=e[t],n}function ei(r){let e,t,n,o,i,a,s,u=(r[4].namespace+":"+r[4].resource).length<15&&Ut(r);return{c(){e=S("div"),t=S("label"),n=S("input"),i=Q(),u&&u.c(),this.h()},l(l){e=M(l,"DIV",{class:!0});var c=y(e);t=M(c,"LABEL",{class:!0});var f=y(t);n=M(f,"INPUT",{type:!0,title:!0,class:!0}),i=$(f),u&&u.l(f),f.forEach(m),c.forEach(m),this.h()},h(){h(n,"type","text"),n.value=o=r[4].namespace+":"+r[4].resource,h(n,"title",r[0]),h(n,"class","svelte-v5i92b"),h(t,"class","svelte-v5i92b"),h(e,"class","flex svelte-v5i92b")},m(l,c){R(l,e,c),_(e,t),_(t,n),_(t,i),u&&u.m(t,null),a||(s=[L(n,"mousedown",Ee(r[11])),L(n,"change",r[5]),L(n,"keydown",Ee(r[12]))],a=!0)},p(l,c){c&16&&o!==(o=l[4].namespace+":"+l[4].resource)&&n.value!==o&&(n.value=o),c&1&&h(n,"title",l[0]),(l[4].namespace+":"+l[4].resource).length<15?u?u.p(l,c):(u=Ut(l),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},d(l){l&&m(e),u&&u.d(),a=!1,_e(s)}}}function ti(r){let e,t,n,o,i,a,s,u=r[3].length<15&&Xt(r);return{c(){e=S("div"),t=S("label"),n=S("input"),i=Q(),u&&u.c(),this.h()},l(l){e=M(l,"DIV",{class:!0});var c=y(e);t=M(c,"LABEL",{class:!0});var f=y(t);n=M(f,"INPUT",{type:!0,title:!0,class:!0}),i=$(f),u&&u.l(f),f.forEach(m),c.forEach(m),this.h()},h(){h(n,"type","text"),n.value=o=r[2].data,h(n,"title",r[0]),h(n,"class","svelte-v5i92b"),h(t,"class","svelte-v5i92b"),h(e,"class","flex svelte-v5i92b")},m(l,c){R(l,e,c),_(e,t),_(t,n),_(t,i),u&&u.m(t,null),a||(s=[L(n,"mousedown",Ee(r[9])),L(n,"change",r[5]),L(n,"keydown",Ee(r[10]))],a=!0)},p(l,c){c&6&&o!==(o=l[2].data)&&n.value!==o&&(n.value=o),c&1&&h(n,"title",l[0]),l[3].length<15?u?u.p(l,c):(u=Xt(l),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},d(l){l&&m(e),u&&u.d(),a=!1,_e(s)}}}function ni(r){let e,t,n,o,i,a,s,u,l,c;return{c(){e=S("div"),t=S("label"),n=S("input"),i=Q(),a=S("div"),s=S("span"),u=te(r[0]),this.h()},l(f){e=M(f,"DIV",{class:!0});var p=y(e);t=M(p,"LABEL",{class:!0});var d=y(t);n=M(d,"INPUT",{type:!0,class:!0}),i=$(d),a=M(d,"DIV",{class:!0});var g=y(a);s=M(g,"SPAN",{class:!0});var N=y(s);u=ne(N,r[0]),N.forEach(m),g.forEach(m),d.forEach(m),p.forEach(m),this.h()},h(){h(n,"type","number"),n.value=o=r[2].data,h(n,"class","svelte-v5i92b"),h(s,"class","input-hover-text svelte-v5i92b"),h(a,"class","svelte-v5i92b"),h(t,"class","svelte-v5i92b"),h(e,"class","flex svelte-v5i92b")},m(f,p){R(f,e,p),_(e,t),_(t,n),_(t,i),_(t,a),_(a,s),_(s,u),l||(c=[L(n,"mousedown",ai),L(n,"change",r[5]),L(n,"keydown",li)],l=!0)},p(f,p){p&6&&o!==(o=f[2].data)&&n.value!==o&&(n.value=o),p&1&&ke(u,f[0])},d(f){f&&m(e),l=!1,_e(c)}}}function ri(r){let e,t=[],n=new Map,o,i,a,s=r[1].data;const u=l=>l[13];for(let l=0;l<s.length;l+=1){let c=jt(r,s,l),f=u(c);n.set(f,t[l]=Ht(f,c))}return{c(){e=S("select");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=M(l,"SELECT",{class:!0});var c=y(e);for(let f=0;f<t.length;f+=1)t[f].l(c);c.forEach(m),this.h()},h(){h(e,"class","svelte-v5i92b")},m(l,c){R(l,e,c);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);Ze(e,r[2].data),i||(a=[L(e,"mousedown",oi),L(e,"input",r[5])],i=!0)},p(l,c){c&2&&(s=l[1].data,t=Pe(t,c,u,1,l,s,n,e,zn,Ht,null,jt)),c&6&&o!==(o=l[2].data)&&Ze(e,l[2].data)},d(l){l&&m(e);for(let c=0;c<t.length;c+=1)t[c].d();i=!1,_e(a)}}}function Ut(r){let e,t,n;return{c(){e=S("div"),t=S("span"),n=te(r[0]),this.h()},l(o){e=M(o,"DIV",{class:!0});var i=y(e);t=M(i,"SPAN",{class:!0});var a=y(t);n=ne(a,r[0]),a.forEach(m),i.forEach(m),this.h()},h(){h(t,"class","input-hover-text svelte-v5i92b"),h(e,"class","svelte-v5i92b")},m(o,i){R(o,e,i),_(e,t),_(t,n)},p(o,i){i&1&&ke(n,o[0])},d(o){o&&m(e)}}}function Xt(r){let e,t,n;return{c(){e=S("div"),t=S("span"),n=te(r[0]),this.h()},l(o){e=M(o,"DIV",{class:!0});var i=y(e);t=M(i,"SPAN",{class:!0});var a=y(t);n=ne(a,r[0]),a.forEach(m),i.forEach(m),this.h()},h(){h(t,"class","input-hover-text svelte-v5i92b"),h(e,"class","svelte-v5i92b")},m(o,i){R(o,e,i),_(e,t),_(t,n)},p(o,i){i&1&&ke(n,o[0])},d(o){o&&m(e)}}}function Ht(r,e){let t,n=e[13]+"",o,i;return{key:r,first:null,c(){t=S("option"),o=te(n),this.h()},l(a){t=M(a,"OPTION",{});var s=y(t);o=ne(s,n),s.forEach(m),this.h()},h(){t.__value=i=e[13],t.value=t.__value,this.first=t},m(a,s){R(a,t,s),_(t,o)},p(a,s){e=a,s&2&&n!==(n=e[13]+"")&&ke(o,n),s&2&&i!==(i=e[13])&&(t.__value=i,t.value=t.__value)},d(a){a&&m(t)}}}function ii(r){let e;function t(i,a){if(i[1].variant==="MultipleChoice")return ri;if(i[1].variant=="Integer")return ni;if(i[1].variant=="String")return ti;if(i[1].variant=="Resource")return ei}let n=t(r),o=n&&n(r);return{c(){e=S("div"),o&&o.c(),this.h()},l(i){e=M(i,"DIV",{class:!0});var a=y(e);o&&o.l(a),a.forEach(m),this.h()},h(){h(e,"class","container svelte-v5i92b")},m(i,a){R(i,e,a),o&&o.m(e,null)},p(i,[a]){n===(n=t(i))&&o?o.p(i,a):(o&&o.d(1),o=n&&n(i),o&&(o.c(),o.m(e,null)))},i:H,o:H,d(i){i&&m(e),o&&o.d()}}}const oi=r=>r.stopPropagation(),ai=r=>r.stopPropagation(),li=r=>r.stopPropagation();function si(r,e,t){let n,o,{nodeWrapper:i}=e,{nodeIndex:a}=e,{propName:s}=e,{propType:u}=e,{nodes:l}=e,{value:c}=e;function f(E){const B=this.value,V=wt(u,{MultipleChoice:Y=>(this.value=B,{variant:"MultipleChoice",data:B}),Integer:()=>{const Y=parseInt(B);return this.value=Y+"",{variant:"Integer",data:Y}},String:()=>({variant:"String",data:B}),Resource:()=>{let Y=B.split(":"),k=Y[0],W=Y.slice(1).join(":");return{variant:"Resource",data:{namespace:k,resource:W}}}},()=>{throw new Error("unimplemened")});_t(i.properties[s],V)||(t(6,i.properties[s]=V,i),l.updateNode(a),l.markNodeAsUpdated(a),l.writeChangedNodesToServer())}function p(E){ge.call(this,r,E)}function d(E){ge.call(this,r,E)}function g(E){ge.call(this,r,E)}function N(E){ge.call(this,r,E)}return r.$$set=E=>{"nodeWrapper"in E&&t(6,i=E.nodeWrapper),"nodeIndex"in E&&t(7,a=E.nodeIndex),"propName"in E&&t(0,s=E.propName),"propType"in E&&t(1,u=E.propType),"nodes"in E&&t(8,l=E.nodes),"value"in E&&t(2,c=E.value)},r.$$.update=()=>{r.$$.dirty&4&&t(4,n=c==null?void 0:c.data),r.$$.dirty&4&&t(3,o=c==null?void 0:c.data)},[s,u,c,o,n,f,i,a,l,p,d,g,N]}class ui extends de{constructor(e){super(),he(this,e,si,ii,ve,{nodeWrapper:6,nodeIndex:7,propName:0,propType:1,nodes:8,value:2})}}function ut(r,e){const t=(Math.round(r*Math.pow(10,e))/Math.pow(10,e)).toString().split(".");return t.length>1?t[0]+"."+t[1].substring(0,e):t[0]}const ci={socketType(r){return yt(r,{Simple:({data:[e,t]})=>t,Numbered:({data:[e,t,n]})=>n})}};function fi(r){let e,t,n,o,i;return{c(){e=S("div"),t=se("svg"),n=se("polygon"),this.h()},l(a){e=M(a,"DIV",{class:!0});var s=y(e);t=ue(s,"svg",{viewBox:!0});var u=y(t);n=ue(u,"polygon",{points:!0,class:!0}),y(n).forEach(m),u.forEach(m),s.forEach(m),this.h()},h(){h(n,"points","13,1 25,25 1,25"),h(n,"class","svelte-1d72jqc"),h(t,"viewBox","0 0 26 26"),h(e,"class","socket value svelte-1d72jqc")},m(a,s){R(a,e,s),_(e,t),_(t,n),o||(i=[L(e,"mousedown",r[2]),L(e,"mouseup",r[3])],o=!0)},p:H,d(a){a&&m(e),o=!1,_e(i)}}}function di(r){let e,t,n;return{c(){e=S("div"),this.h()},l(o){e=M(o,"DIV",{class:!0}),y(e).forEach(m),this.h()},h(){h(e,"class","socket midi svelte-1d72jqc")},m(o,i){R(o,e,i),t||(n=[L(e,"mousedown",r[2]),L(e,"mouseup",r[3])],t=!0)},p:H,d(o){o&&m(e),t=!1,_e(n)}}}function hi(r){let e,t,n;return{c(){e=S("div"),this.h()},l(o){e=M(o,"DIV",{class:!0}),y(e).forEach(m),this.h()},h(){h(e,"class","socket stream svelte-1d72jqc")},m(o,i){R(o,e,i),t||(n=[L(e,"mousedown",r[2]),L(e,"mouseup",r[3])],t=!0)},p:H,d(o){o&&m(e),t=!1,_e(n)}}}function vi(r){let e;function t(i,a){if(i[1].variant==="Stream")return hi;if(i[1].variant==="Midi")return di;if(i[1].variant==="Value")return fi}let n=t(r),o=n&&n(r);return{c(){e=S("div"),o&&o.c(),this.h()},l(i){e=M(i,"DIV",{class:!0});var a=y(e);o&&o.l(a),a.forEach(m),this.h()},h(){h(e,"class","socket-container svelte-1d72jqc"),le(e,"output",r[0].variant==="Output"),le(e,"input",r[0].variant==="Input")},m(i,a){R(i,e,a),o&&o.m(e,null)},p(i,[a]){n===(n=t(i))&&o?o.p(i,a):(o&&o.d(1),o=n&&n(i),o&&(o.c(),o.m(e,null))),a&1&&le(e,"output",i[0].variant==="Output"),a&1&&le(e,"input",i[0].variant==="Input")},i:H,o:H,d(i){i&&m(e),o&&o.d()}}}function mi(r,e,t){let n;const o=Ye();let{direction:i}=e,{socket:a}=e;function s(l){l.preventDefault(),l.stopPropagation(),o("socketMousedown",{event:l,socket:a,direction:i})}function u(l){o("socketMouseup",{event:l,socket:a,direction:i})}return r.$$set=l=>{"direction"in l&&t(0,i=l.direction),"socket"in l&&t(4,a=l.socket)},r.$$.update=()=>{r.$$.dirty&16&&t(1,n=ci.socketType(a))},[i,n,s,u,a]}class xn extends de{constructor(e){super(),he(this,e,mi,vi,ve,{direction:0,socket:4})}}function Jt(r){let e,t;return e=new xn({props:{direction:r[2],socket:r[0]}}),e.$on("socketMousedown",r[14]),e.$on("socketMouseup",r[15]),{c(){re(e.$$.fragment)},l(n){ie(e.$$.fragment,n)},m(n,o){oe(e,n,o),t=!0},p(n,o){const i={};o&4&&(i.direction=n[2]),o&1&&(i.socket=n[0]),e.$set(i)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){Z(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function pi(r){let e,t;return{c(){e=S("div"),t=te(r[1]),this.h()},l(n){e=M(n,"DIV",{class:!0});var o=y(e);t=ne(o,r[1]),o.forEach(m),this.h()},h(){h(e,"class","text svelte-18pnchp")},m(n,o){R(n,e,o),_(e,t)},p(n,o){o&2&&ke(t,n[1])},d(n){n&&m(e)}}}function gi(r){let e;function t(i,a){return i[3].variant==="Value"?wi:i[3].variant==="Stream"?ki:_i}let n=t(r),o=n(r);return{c(){o.c(),e=ce()},l(i){o.l(i),e=ce()},m(i,a){o.m(i,a),R(i,e,a)},p(i,a){n===(n=t(i))&&o?o.p(i,a):(o.d(1),o=n(i),o&&(o.c(),o.m(e.parentNode,e)))},d(i){o.d(i),i&&m(e)}}}function _i(r){let e,t;return{c(){e=S("div"),t=te(r[1]),this.h()},l(n){e=M(n,"DIV",{class:!0});var o=y(e);t=ne(o,r[1]),o.forEach(m),this.h()},h(){h(e,"class","text svelte-18pnchp")},m(n,o){R(n,e,o),_(e,t)},p(n,o){o&2&&ke(t,n[1])},d(n){n&&m(e)}}}function ki(r){let e,t,n,o,i,a,s,u,l,c;return{c(){e=S("div"),t=S("label"),n=S("input"),i=Q(),a=S("div"),s=S("span"),u=te(r[1]),this.h()},l(f){e=M(f,"DIV",{class:!0});var p=y(e);t=M(p,"LABEL",{class:!0});var d=y(t);n=M(d,"INPUT",{class:!0}),i=$(d),a=M(d,"DIV",{class:!0});var g=y(a);s=M(g,"SPAN",{class:!0});var N=y(s);u=ne(N,r[1]),N.forEach(m),g.forEach(m),d.forEach(m),p.forEach(m),this.h()},h(){n.value=o=ut(r[3].data,3),h(n,"class","svelte-18pnchp"),h(s,"class","input-hover-text svelte-18pnchp"),h(a,"class","svelte-18pnchp"),h(t,"class","svelte-18pnchp"),h(e,"class","flex svelte-18pnchp")},m(f,p){R(f,e,p),_(e,t),_(t,n),_(t,i),_(t,a),_(a,s),_(s,u),l||(c=[L(n,"mousedown",Ee(r[12])),L(n,"change",r[5]),L(n,"keydown",Ee(r[13]))],l=!0)},p(f,p){p&8&&o!==(o=ut(f[3].data,3))&&n.value!==o&&(n.value=o),p&2&&ke(u,f[1])},d(f){f&&m(e),l=!1,_e(c)}}}function wi(r){let e;function t(i,a){if(i[3].data.variant==="Float")return bi;if(i[3].data.variant==="Boolean")return yi}let n=t(r),o=n&&n(r);return{c(){o&&o.c(),e=ce()},l(i){o&&o.l(i),e=ce()},m(i,a){o&&o.m(i,a),R(i,e,a)},p(i,a){n===(n=t(i))&&o?o.p(i,a):(o&&o.d(1),o=n&&n(i),o&&(o.c(),o.m(e.parentNode,e)))},d(i){o&&o.d(i),i&&m(e)}}}function yi(r){let e,t,n,o,i,a,s;return{c(){e=S("input"),n=Q(),o=S("div"),i=te(r[1]),this.h()},l(u){e=M(u,"INPUT",{type:!0,class:!0}),n=$(u),o=M(u,"DIV",{class:!0});var l=y(o);i=ne(l,r[1]),l.forEach(m),this.h()},h(){h(e,"type","checkbox"),e.checked=t=r[3].data.data,h(e,"class","svelte-18pnchp"),h(o,"class","text svelte-18pnchp")},m(u,l){R(u,e,l),R(u,n,l),R(u,o,l),_(o,i),a||(s=[L(e,"change",r[5]),L(e,"mousedown",Ee(r[10])),L(e,"dblclick",Ee(r[11]))],a=!0)},p(u,l){l&8&&t!==(t=u[3].data.data)&&(e.checked=t),l&2&&ke(i,u[1])},d(u){u&&m(e),u&&m(n),u&&m(o),a=!1,_e(s)}}}function bi(r){let e,t,n,o,i,a,s,u,l,c;return{c(){e=S("div"),t=S("label"),n=S("input"),i=Q(),a=S("div"),s=S("span"),u=te(r[1]),this.h()},l(f){e=M(f,"DIV",{class:!0});var p=y(e);t=M(p,"LABEL",{class:!0});var d=y(t);n=M(d,"INPUT",{class:!0}),i=$(d),a=M(d,"DIV",{class:!0});var g=y(a);s=M(g,"SPAN",{class:!0});var N=y(s);u=ne(N,r[1]),N.forEach(m),g.forEach(m),d.forEach(m),p.forEach(m),this.h()},h(){n.value=o=ut(r[3].data.data,3),h(n,"class","svelte-18pnchp"),h(s,"class","input-hover-text svelte-18pnchp"),h(a,"class","svelte-18pnchp"),h(t,"class","svelte-18pnchp"),h(e,"class","flex svelte-18pnchp")},m(f,p){R(f,e,p),_(e,t),_(t,n),_(t,i),_(t,a),_(a,s),_(s,u),l||(c=[L(n,"mousedown",Ee(r[8])),L(n,"change",r[5]),L(n,"keydown",Ee(r[9]))],l=!0)},p(f,p){p&8&&o!==(o=ut(f[3].data.data,3))&&n.value!==o&&(n.value=o),p&2&&ke(u,f[1])},d(f){f&&m(e),l=!1,_e(c)}}}function Qt(r){let e,t;return e=new xn({props:{direction:r[2],socket:r[0]}}),e.$on("socketMousedown",r[16]),e.$on("socketMouseup",r[17]),{c(){re(e.$$.fragment)},l(n){ie(e.$$.fragment,n)},m(n,o){oe(e,n,o),t=!0},p(n,o){const i={};o&4&&(i.direction=n[2]),o&1&&(i.socket=n[0]),e.$set(i)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){Z(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Ei(r){let e,t,n,o,i=r[2].variant==="Input"&&Jt(r);function a(c,f){return c[2].variant==="Input"&&!c[4]?gi:pi}let s=a(r),u=s(r),l=r[2].variant==="Output"&&Qt(r);return{c(){e=S("div"),i&&i.c(),t=Q(),u.c(),n=Q(),l&&l.c(),this.h()},l(c){e=M(c,"DIV",{class:!0});var f=y(e);i&&i.l(f),t=$(f),u.l(f),n=$(f),l&&l.l(f),f.forEach(m),this.h()},h(){var c,f;h(e,"class","container svelte-18pnchp"),le(e,"socket-output",((c=r[2])==null?void 0:c.variant)==="Output"),le(e,"socket-input",((f=r[2])==null?void 0:f.variant)==="Input")},m(c,f){R(c,e,f),i&&i.m(e,null),_(e,t),u.m(e,null),_(e,n),l&&l.m(e,null),o=!0},p(c,[f]){var p,d;c[2].variant==="Input"?i?(i.p(c,f),f&4&&z(i,1)):(i=Jt(c),i.c(),z(i,1),i.m(e,t)):i&&(ye(),Z(i,1,1,()=>{i=null}),be()),s===(s=a(c))&&u?u.p(c,f):(u.d(1),u=s(c),u&&(u.c(),u.m(e,n))),c[2].variant==="Output"?l?(l.p(c,f),f&4&&z(l,1)):(l=Qt(c),l.c(),z(l,1),l.m(e,null)):l&&(ye(),Z(l,1,1,()=>{l=null}),be()),(!o||f&4)&&le(e,"socket-output",((p=c[2])==null?void 0:p.variant)==="Output"),(!o||f&4)&&le(e,"socket-input",((d=c[2])==null?void 0:d.variant)==="Input")},i(c){o||(z(i),z(l),o=!0)},o(c){Z(i),Z(l),o=!1},d(c){c&&m(e),i&&i.d(),u.d(),l&&l.d()}}}function Ii(r,e,t){let n,{socket:o}=e,{label:i}=e,{direction:a}=e,{nodeIndex:s}=e,{nodes:u}=e,{value:l}=e;const c=Ye();function f(A){const P=this.value,O=wt(l,{Stream:()=>{const I=parseFloat(P);return this.value=I+"",{variant:"Stream",data:isNaN(I)?0:I}},Value:({data:I})=>({variant:"Value",data:yt(I,{String:()=>({variant:"String",data:this.value}),Int:C=>{const K=parseInt(P);return this.value=K+"",{variant:"Int",data:K}},Float:C=>{const K=parseFloat(P);return this.value=K+"",{variant:"Float",data:isNaN(K)?0:K}},Boolean:C=>({variant:"Boolean",data:this.checked})})})},()=>{throw new Error("unimplemented")});c("overrideUpdate",{socket:o,direction:a,newValue:O})}function p(A){ge.call(this,r,A)}function d(A){ge.call(this,r,A)}function g(A){ge.call(this,r,A)}function N(A){ge.call(this,r,A)}function E(A){ge.call(this,r,A)}function B(A){ge.call(this,r,A)}function V(A){ge.call(this,r,A)}function Y(A){ge.call(this,r,A)}function k(A){ge.call(this,r,A)}function W(A){ge.call(this,r,A)}return r.$$set=A=>{"socket"in A&&t(0,o=A.socket),"label"in A&&t(1,i=A.label),"direction"in A&&t(2,a=A.direction),"nodeIndex"in A&&t(6,s=A.nodeIndex),"nodes"in A&&t(7,u=A.nodes),"value"in A&&t(3,l=A.value)},r.$$.update=()=>{r.$$.dirty&197&&t(4,n=a.variant==="Input"?u.getNodeInputConnection(s,o):void 0)},[o,i,a,l,n,f,s,u,p,d,g,N,E,B,V,Y,k,W]}class Si extends de{constructor(e){super(),he(this,e,Ii,Ei,ve,{socket:0,label:1,direction:2,nodeIndex:6,nodes:7,value:3})}}function $t(r,e,t){const n=r.slice();return n[17]=e[t],n}function Mi(r){let e,t,n,o,i,a;return{c(){e=S("div"),t=S("button"),n=te("Open inner graph"),o=Q(),this.h()},l(s){e=M(s,"DIV",{class:!0});var u=y(e);t=M(u,"BUTTON",{class:!0});var l=y(t);n=ne(l,"Open inner graph"),l.forEach(m),o=$(u),u.forEach(m),this.h()},h(){h(t,"class","svelte-v1qoci"),h(e,"class","container svelte-v1qoci")},m(s,u){R(s,e,u),_(e,t),_(t,n),_(e,o),i||(a=L(t,"click",r[9]),i=!0)},p:H,i:H,o:H,d(s){s&&m(e),i=!1,a()}}}function Ni(r){let e,t;return e=new ui({props:{nodes:r[2],nodeWrapper:r[0],propName:r[17].propName,propType:r[17].propType,value:r[17].propValue,nodeIndex:r[3]}}),{c(){re(e.$$.fragment)},l(n){ie(e.$$.fragment,n)},m(n,o){oe(e,n,o),t=!0},p(n,o){const i={};o&4&&(i.nodes=n[2]),o&1&&(i.nodeWrapper=n[0]),o&32&&(i.propName=n[17].propName),o&32&&(i.propType=n[17].propType),o&32&&(i.value=n[17].propValue),o&8&&(i.nodeIndex=n[3]),e.$set(i)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){Z(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Di(r){let e,t;return e=new Si({props:{nodes:r[2],socket:r[17].socket,direction:r[17].socketDirection,label:r[7](...r[4].getSocketInterpolation(r[17].socket)),value:r[17].value,nodeIndex:r[3]}}),e.$on("socketMousedown",r[10]),e.$on("socketMouseup",r[11]),e.$on("overrideUpdate",r[12]),{c(){re(e.$$.fragment)},l(n){ie(e.$$.fragment,n)},m(n,o){oe(e,n,o),t=!0},p(n,o){const i={};o&4&&(i.nodes=n[2]),o&32&&(i.socket=n[17].socket),o&32&&(i.direction=n[17].socketDirection),o&176&&(i.label=n[7](...n[4].getSocketInterpolation(n[17].socket))),o&32&&(i.value=n[17].value),o&8&&(i.nodeIndex=n[3]),e.$set(i)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){Z(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function en(r,e){let t,n,o,i,a;const s=[Di,Ni,Mi],u=[];function l(c,f){return c[17].variant==="SocketRow"?0:c[17].variant==="PropertyRow"?1:2}return n=l(e),o=u[n]=s[n](e),{key:r,first:null,c(){t=ce(),o.c(),i=ce(),this.h()},l(c){t=ce(),o.l(c),i=ce(),this.h()},h(){this.first=t},m(c,f){R(c,t,f),u[n].m(c,f),R(c,i,f),a=!0},p(c,f){e=c;let p=n;n=l(e),n===p?u[n].p(e,f):(ye(),Z(u[p],1,1,()=>{u[p]=null}),be(),o=u[n],o?o.p(e,f):(o=u[n]=s[n](e),o.c()),z(o,1),o.m(i.parentNode,i))},i(c){a||(z(o),a=!0)},o(c){Z(o),a=!1},d(c){c&&m(t),u[n].d(c),c&&m(i)}}}function Ti(r){let e,t,n=(r[0].uiData.title&&r[0].uiData.title.length>0?r[7]("node-"+r[0].uiData.title):" ")+"",o,i,a=[],s=new Map,u,l,c,f=r[5];const p=d=>Ci(d[17]);for(let d=0;d<f.length;d+=1){let g=$t(r,f,d),N=p(g);s.set(N,a[d]=en(N,g))}return{c(){e=S("div"),t=S("div"),o=te(n),i=Q();for(let d=0;d<a.length;d+=1)a[d].c();this.h()},l(d){e=M(d,"DIV",{class:!0,style:!0});var g=y(e);t=M(g,"DIV",{class:!0});var N=y(t);o=ne(N,n),N.forEach(m),i=$(g);for(let E=0;E<a.length;E+=1)a[E].l(g);g.forEach(m),this.h()},h(){h(t,"class","node-title svelte-v1qoci"),h(e,"class","background svelte-v1qoci"),F(e,"transform","translate("+r[0].uiData.x+"px, "+r[0].uiData.y+"px)"),F(e,"width",r[1]+"px"),le(e,"selected",r[0].uiData.selected)},m(d,g){R(d,e,g),_(e,t),_(t,o),_(e,i);for(let N=0;N<a.length;N+=1)a[N]&&a[N].m(e,null);r[15](e),u=!0,l||(c=[L(e,"mousedown",r[8]),L(e,"dblclick",Ee(r[14]))],l=!0)},p(d,[g]){(!u||g&129)&&n!==(n=(d[0].uiData.title&&d[0].uiData.title.length>0?d[7]("node-"+d[0].uiData.title):" ")+"")&&ke(o,n),g&7869&&(f=d[5],ye(),a=Pe(a,g,p,1,d,f,s,e,Je,en,null,$t),be()),(!u||g&1)&&F(e,"transform","translate("+d[0].uiData.x+"px, "+d[0].uiData.y+"px)"),(!u||g&2)&&F(e,"width",d[1]+"px"),(!u||g&1)&&le(e,"selected",d[0].uiData.selected)},i(d){if(!u){for(let g=0;g<f.length;g+=1)z(a[g]);u=!0}},o(d){for(let g=0;g<a.length;g+=1)Z(a[g]);u=!1},d(d){d&&m(e);for(let g=0;g<a.length;g+=1)a[g].d();r[15](null),l=!1,_e(c)}}}function Ci(r){return r.variant==="SocketRow"?JSON.stringify([r.socket,r.socketDirection]):r.variant==="PropertyRow"?"prop."+r.propName:"innerGraph"}function Oi(r,e,t){let n;kt(r,Or,k=>t(7,n=k));let{width:o=270}=e,{nodes:i}=e,{wrapper:a}=e,{nodeIndex:s}=e,{registry:u}=e;const l=Ye();let c=[],f,{onMousedown:p=function(k,W){}}=e;function d(k){p(s,k)}function g(){a.childGraphIndex!==null&&l("changeGraph",{graphIndex:a.childGraphIndex,nodeTitle:a.uiData.title&&a.uiData.title.length>0?n("node-"+a.uiData.title):" "})}function N(k){l("socketMousedown",{...k.detail,vertexIndex:{...s}})}function E(k){l("socketMouseup",{...k.detail,vertexIndex:{...s}})}function B(k){const W=a.defaultOverrides.findIndex(A=>wt(A,{Input:({data:[P]})=>k.detail.direction.variant==="Input"&&_t(k.detail.socket,P),Output:({data:[P]})=>k.detail.direction.variant==="Output"&&_t(k.detail.socket,P)},()=>!1));W!==-1?t(0,a.defaultOverrides[W]={variant:k.detail.direction.variant,data:[k.detail.socket,k.detail.newValue]},a):a.defaultOverrides.push({variant:k.detail.direction.variant,data:[k.detail.socket,k.detail.newValue]}),i.markNodeAsUpdated(s),i.writeChangedNodesToServer()}function V(k){ge.call(this,r,k)}function Y(k){st[k?"unshift":"push"](()=>{f=k,t(6,f)})}return r.$$set=k=>{"width"in k&&t(1,o=k.width),"nodes"in k&&t(2,i=k.nodes),"wrapper"in k&&t(0,a=k.wrapper),"nodeIndex"in k&&t(3,s=k.nodeIndex),"registry"in k&&t(4,u=k.registry),"onMousedown"in k&&t(13,p=k.onMousedown)},r.$$.update=()=>{r.$$.dirty&13&&t(5,c=a.nodeRows.map(k=>yt(k,{Input:({data:[W,A]})=>({variant:"SocketRow",socket:W,socketDirection:{variant:"Input"},value:i.getNodeSocketDefault(s,W,{variant:"Input"})}),Output:({data:[W,A]})=>({variant:"SocketRow",socket:W,socketDirection:{variant:"Output"},value:i.getNodeSocketDefault(s,W,{variant:"Output"})}),Property:({data:[W,A,P]})=>({variant:"PropertyRow",propName:W,propType:A,propValue:i.getNodePropertyValue(s,W)??{variant:"String",data:""}}),InnerGraph:()=>({variant:"InnerGraphRow"})})))},[a,o,i,s,u,c,f,n,d,g,N,E,B,p,V,Y]}class Ai extends de{constructor(e){super(),he(this,e,Oi,Ti,ve,{width:1,nodes:2,wrapper:0,nodeIndex:3,registry:4,onMousedown:13})}}function Bi(r){let e,t,n,o;return{c(){e=se("svg"),t=se("path"),this.h()},l(i){e=ue(i,"svg",{viewBox:!0,style:!0,class:!0});var a=y(e);t=ue(a,"path",{d:!0,class:!0}),y(t).forEach(m),a.forEach(m),this.h()},h(){h(t,"d",n="M "+r[0]+" "+r[1]+" C "+r[5]+" "+r[1]+" "+r[4]+" "+r[3]+" "+r[2]+" "+r[3]),h(t,"class","svelte-1gffjkh"),h(e,"viewBox",o=r[9]-50+" "+(r[8]-50)+" "+(r[7]-r[9]+100)+" "+(r[6]-r[8]+100)),F(e,"width",r[7]-r[9]+100+"px"),F(e,"height",r[6]-r[8]+100+"px"),F(e,"transform","translate("+(r[9]-50)+"px, "+(r[8]-50)+"px)"),h(e,"class","svelte-1gffjkh")},m(i,a){R(i,e,a),_(e,t)},p(i,[a]){a&63&&n!==(n="M "+i[0]+" "+i[1]+" C "+i[5]+" "+i[1]+" "+i[4]+" "+i[3]+" "+i[2]+" "+i[3])&&h(t,"d",n),a&960&&o!==(o=i[9]-50+" "+(i[8]-50)+" "+(i[7]-i[9]+100)+" "+(i[6]-i[8]+100))&&h(e,"viewBox",o),a&640&&F(e,"width",i[7]-i[9]+100+"px"),a&320&&F(e,"height",i[6]-i[8]+100+"px"),a&768&&F(e,"transform","translate("+(i[9]-50)+"px, "+(i[8]-50)+"px)")},i:H,o:H,d(i){i&&m(e)}}}const tn=.4;function Vi(r,e,t){let n,o,i,a,s,u,{x1:l=0}=e,{y1:c=0}=e,{x2:f=100}=e,{y2:p=100}=e;return r.$$set=d=>{"x1"in d&&t(0,l=d.x1),"y1"in d&&t(1,c=d.y1),"x2"in d&&t(2,f=d.x2),"y2"in d&&t(3,p=d.y2)},r.$$.update=()=>{r.$$.dirty&5&&t(9,n=Math.min(l,f)),r.$$.dirty&10&&t(8,o=Math.min(c,p)),r.$$.dirty&5&&t(7,i=Math.max(l,f)),r.$$.dirty&10&&t(6,a=Math.max(c,p)),r.$$.dirty&5&&t(5,s=l+Math.abs(f-l)*tn),r.$$.dirty&5&&t(4,u=f-Math.abs(f-l)*tn)},[l,c,f,p,u,s,a,i,o,n]}class bt extends de{constructor(e){super(),he(this,e,Vi,Bi,ve,{x1:0,y1:1,x2:2,y2:3})}}var Qe={},Ri={get exports(){return Qe},set exports(r){Qe=r}};Ri.exports=Gn;Qe.addWheelListener=Gn;Qe.removeWheelListener=Pi;function Gn(r,e,t){r.addEventListener("wheel",e,t)}function Pi(r,e,t){r.removeEventListener("wheel",e,t)}var $e={},zi={get exports(){return $e},set exports(r){$e=r}},Li=4,Fi=.001,Wi=1e-7,qi=10,Ue=11,at=1/(Ue-1),Zi=typeof Float32Array=="function";function Kn(r,e){return 1-3*e+3*r}function jn(r,e){return 3*e-6*r}function Un(r){return 3*r}function ct(r,e,t){return((Kn(e,t)*r+jn(e,t))*r+Un(e))*r}function Xn(r,e,t){return 3*Kn(e,t)*r*r+2*jn(e,t)*r+Un(e)}function Yi(r,e,t,n,o){var i,a,s=0;do a=e+(t-e)/2,i=ct(a,n,o)-r,i>0?t=a:e=a;while(Math.abs(i)>Wi&&++s<qi);return a}function xi(r,e,t,n){for(var o=0;o<Li;++o){var i=Xn(e,t,n);if(i===0)return e;var a=ct(e,t,n)-r;e-=a/i}return e}function Gi(r){return r}var Ki=function(e,t,n,o){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===o)return Gi;for(var i=Zi?new Float32Array(Ue):new Array(Ue),a=0;a<Ue;++a)i[a]=ct(a*at,e,n);function s(u){for(var l=0,c=1,f=Ue-1;c!==f&&i[c]<=u;++c)l+=at;--c;var p=(u-i[c])/(i[c+1]-i[c]),d=l+p*at,g=Xn(d,e,n);return g>=Fi?xi(u,d,e,n):g===0?d:Yi(u,l,l+at,e,n)}return function(l){return l===0?0:l===1?1:ct(s(l),t,o)}},je=Ki,nn={ease:je(.25,.1,.25,1),easeIn:je(.42,0,1,1),easeOut:je(0,0,.58,1),easeInOut:je(.42,0,.58,1),linear:je(0,0,1,1)};zi.exports=ji;$e.makeAggregateRaf=Hn;$e.sharedScheduler=Hn();function ji(r,e,t){var n=Object.create(null),o=Object.create(null);t=t||{};var i=typeof t.easing=="function"?t.easing:nn[t.easing];i||(t.easing&&console.warn("Unknown easing function in amator: "+t.easing),i=nn.ease);var a=typeof t.step=="function"?t.step:rn,s=typeof t.done=="function"?t.done:rn,u=Ui(t.scheduler),l=Object.keys(e);l.forEach(function(B){n[B]=r[B],o[B]=e[B]-r[B]});var c=typeof t.duration=="number"?t.duration:400,f=Math.max(1,c*.06),p,d=0;return p=u.next(N),{cancel:g};function g(){u.cancel(p),p=0}function N(){var B=i(d/f);d+=1,E(B),d<=f?(p=u.next(N),a(r)):(p=0,setTimeout(function(){s(r)},0))}function E(B){l.forEach(function(V){r[V]=o[V]*B+n[V]})}}function rn(){}function Ui(r){if(!r){var e=typeof window<"u"&&window.requestAnimationFrame;return e?Xi():Hi()}if(typeof r.next!="function")throw new Error("Scheduler is supposed to have next(cb) function");if(typeof r.cancel!="function")throw new Error("Scheduler is supposed to have cancel(handle) function");return r}function Xi(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function Hi(){return{next:function(r){return setTimeout(r,1e3/60)},cancel:function(r){return clearTimeout(r)}}}function Hn(){var r=new Set,e=new Set,t=0;return{next:o,cancel:o,clearAll:n};function n(){r.clear(),e.clear(),cancelAnimationFrame(t),t=0}function o(s){e.add(s),i()}function i(){t||(t=requestAnimationFrame(a))}function a(){t=0;var s=e;e=r,r=s,r.forEach(function(u){u()}),r.clear()}}var Ji=function(e){$i(e);var t=Qi(e);return e.on=t.on,e.off=t.off,e.fire=t.fire,e};function Qi(r){var e=Object.create(null);return{on:function(t,n,o){if(typeof n!="function")throw new Error("callback is expected to be a function");var i=e[t];return i||(i=e[t]=[]),i.push({callback:n,ctx:o}),r},off:function(t,n){var o=typeof t>"u";if(o)return e=Object.create(null),r;if(e[t]){var i=typeof n!="function";if(i)delete e[t];else for(var a=e[t],s=0;s<a.length;++s)a[s].callback===n&&a.splice(s,1)}return r},fire:function(t){var n=e[t];if(!n)return r;var o;arguments.length>1&&(o=Array.prototype.splice.call(arguments,1));for(var i=0;i<n.length;++i){var a=n[i];a.callback.apply(a.ctx,o)}return r}}}function $i(r){if(!r)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],t=0;t<e.length;++t)if(r.hasOwnProperty(e[t]))throw new Error("Subject cannot be eventified, since it already has property '"+e[t]+"'")}var eo=to;function to(r,e,t){typeof t!="object"&&(t={});var n=typeof t.minVelocity=="number"?t.minVelocity:5,o=typeof t.amplitude=="number"?t.amplitude:.25,i=typeof t.cancelAnimationFrame=="function"?t.cancelAnimationFrame:no(),a=typeof t.requestAnimationFrame=="function"?t.requestAnimationFrame:ro(),s,u,l=342,c,f,p,d,g,N,E,B;return{start:Y,stop:W,cancel:V};function V(){i(c),i(B)}function Y(){s=r(),d=E=f=g=0,u=new Date,i(c),i(B),c=a(k)}function k(){var P=Date.now(),O=P-u;u=P;var I=r(),C=I.x-s.x,K=I.y-s.y;s=I;var J=1e3/(1+O);f=.8*C*J+.2*f,g=.8*K*J+.2*g,c=a(k)}function W(){i(c),i(B);var P=r();p=P.x,N=P.y,u=Date.now(),(f<-n||f>n)&&(d=o*f,p+=d),(g<-n||g>n)&&(E=o*g,N+=E),B=a(A)}function A(){var P=Date.now()-u,O=!1,I=0,C=0;d&&(I=-d*Math.exp(-P/l),I>.5||I<-.5?O=!0:I=d=0),E&&(C=-E*Math.exp(-P/l),C>.5||C<-.5?O=!0:C=E=0),O&&(e(p+I,N+C),B=a(A))}}function no(){return typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearTimeout}function ro(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(r){return setTimeout(r,16)}}var io=oo;function oo(r){if(r)return{capture:an,release:an};var e,t,n,o=!1;return{capture:i,release:a};function i(s){o=!0,t=window.document.onselectstart,n=window.document.ondragstart,window.document.onselectstart=on,e=s,e.ondragstart=on}function a(){o&&(o=!1,window.document.onselectstart=t,e&&(e.ondragstart=n))}}function on(r){return r.stopPropagation(),!1}function an(){}var mt,ln;function ao(){if(ln)return mt;ln=1,mt=r;function r(){this.x=0,this.y=0,this.scale=1}return mt}var Xe={},lo={get exports(){return Xe},set exports(r){Xe=r}},sn;function so(){if(sn)return Xe;sn=1,lo.exports=r,Xe.canAttach=e;function r(t,n){if(!e(t))throw new Error("svg element is required for svg.panzoom to work");var o=t.ownerSVGElement;if(!o)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");n.disableKeyboardInteraction||o.setAttribute("tabindex",0);var i={getBBox:s,getScreenCTM:u,getOwner:a,applyTransform:c,initTransform:l};return i;function a(){return o}function s(){var f=t.getBBox();return{left:f.x,top:f.y,width:f.width,height:f.height}}function u(){var f=o.getCTM();return f||o.getScreenCTM()}function l(f){var p=t.getCTM();p===null&&(p=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix()),f.x=p.e,f.y=p.f,f.scale=p.a,o.removeAttributeNS(null,"viewBox")}function c(f){t.setAttribute("transform","matrix("+f.scale+" 0 0 "+f.scale+" "+f.x+" "+f.y+")")}}function e(t){return t&&t.ownerSVGElement&&t.getCTM}return Xe}var He={},uo={get exports(){return He},set exports(r){He=r}},un;function co(){if(un)return He;un=1,uo.exports=r,He.canAttach=e;function r(t,n){var o=e(t);if(!o)throw new Error("panzoom requires DOM element to be attached to the DOM tree");var i=t.parentElement;t.scrollTop=0,n.disableKeyboardInteraction||i.setAttribute("tabindex",0);var a={getBBox:u,getOwner:s,applyTransform:l};return a;function s(){return i}function u(){return{left:0,top:0,width:t.clientWidth,height:t.clientHeight}}function l(c){t.style.transformOrigin="0 0 0",t.style.transform="matrix("+c.scale+", 0, 0, "+c.scale+", "+c.x+", "+c.y+")"}}function e(t){return t&&t.parentElement&&t.style}return He}var cn=Qe,pt=$e,fo=Ji,ho=eo,Jn=io,vo=Jn(),mo=Jn(!0),po=ao(),fn=so(),dn=co(),go=1,_o=1.75,hn=300,vn=200,ko=Qn;function Qn(r,e){e=e||{};var t=e.controller;if(t||(fn.canAttach(r)?t=fn(r,e):dn.canAttach(r)&&(t=dn(r,e))),!t)throw new Error("Cannot create panzoom for the current type of dom element");var n=t.getOwner(),o={x:0,y:0},i=!1,a=new po;t.initTransform&&t.initTransform(a);var s=typeof e.filterKey=="function"?e.filterKey:qe,u=typeof e.pinchSpeed=="number"?e.pinchSpeed:1,l=e.bounds,c=typeof e.maxZoom=="number"?e.maxZoom:Number.POSITIVE_INFINITY,f=typeof e.minZoom=="number"?e.minZoom:0,p=typeof e.boundsPadding=="number"?e.boundsPadding:.05,d=typeof e.zoomDoubleClickSpeed=="number"?e.zoomDoubleClickSpeed:_o,g=e.beforeWheel||qe,N=e.beforeMouseDown||qe,E=typeof e.zoomSpeed=="number"?e.zoomSpeed:go,B=mn(e.transformOrigin),V=e.enableTextSelection?mo:vo;wo(l),e.autocenter&&xe();var Y,k=0,W=0,A=0,P=null,O=new Date,I,C=!1,K=!1,J,j,me,Oe,Ae,pe;"smoothScroll"in e&&!e.smoothScroll?pe=yo():pe=ho(lr,dr,e.smoothScroll);var Be,Ie,Me,Ne=!1;Mt();var De={dispose:hr,moveBy:ze,moveTo:ft,smoothMoveTo:fr,centerOn:cr,zoomTo:it,zoomAbs:tt,smoothZoom:rt,smoothZoomAbs:wr,showRectangle:Ve,pause:we,resume:Se,isPaused:Te,getTransform:et,getMinZoom:$n,setMinZoom:er,getMaxZoom:tr,setMaxZoom:nr,getTransformOrigin:rr,setTransformOrigin:ir,getZoomSpeed:or,setZoomSpeed:ar};fo(De);var D=typeof e.initialX=="number"?e.initialX:a.x,q=typeof e.initialY=="number"?e.initialY:a.y,x=typeof e.initialZoom=="number"?e.initialZoom:a.scale;return(D!=a.x||q!=a.y||x!=a.scale)&&tt(D,q,x),De;function we(){Nt(),Ne=!0}function Se(){Ne&&(Mt(),Ne=!1)}function Te(){return Ne}function Ve(v){var w=n.getBoundingClientRect(),b=ee(w.width,w.height),T=v.right-v.left,G=v.bottom-v.top;if(!Number.isFinite(T)||!Number.isFinite(G))throw new Error("Invalid rectangle");var U=b.x/T,X=b.y/G,fe=Math.min(U,X);a.x=-(v.left+T/2)*fe+b.x/2,a.y=-(v.top+G/2)*fe+b.y/2,a.scale=fe}function ee(v,w){if(t.getScreenCTM){var b=t.getScreenCTM(),T=b.a,G=b.d,U=b.e,X=b.f;o.x=v*T-U,o.y=w*G-X}else o.x=v,o.y=w;return o}function xe(){var v,w,b=0,T=0,G=It();if(G)b=G.left,T=G.top,v=G.right-G.left,w=G.bottom-G.top;else{var U=n.getBoundingClientRect();v=U.width,w=U.height}var X=t.getBBox();if(!(X.width===0||X.height===0)){var fe=w/X.height,Fe=v/X.width,Re=Math.min(Fe,fe);a.x=-(X.left+X.width/2)*Re+v/2+b,a.y=-(X.top+X.height/2)*Re+w/2+T,a.scale=Re}}function et(){return a}function $n(){return f}function er(v){f=v}function tr(){return c}function nr(v){c=v}function rr(){return B}function ir(v){B=mn(v)}function or(){return E}function ar(v){if(!Number.isFinite(v))throw new Error("Zoom speed should be a number");E=v}function lr(){return{x:a.x,y:a.y}}function ft(v,w){a.x=v,a.y=w,dt(),Le("pan"),ht()}function Et(v,w){ft(a.x+v,a.y+w)}function dt(){var v=It();if(v){var w=!1,b=sr(),T=v.left-b.right;return T>0&&(a.x+=T,w=!0),T=v.right-b.left,T<0&&(a.x+=T,w=!0),T=v.top-b.bottom,T>0&&(a.y+=T,w=!0),T=v.bottom-b.top,T<0&&(a.y+=T,w=!0),w}}function It(){if(l){if(typeof l=="boolean"){var v=n.getBoundingClientRect(),w=v.width,b=v.height;return{left:w*p,top:b*p,right:w*(1-p),bottom:b*(1-p)}}return l}}function sr(){var v=t.getBBox(),w=ur(v.left,v.top);return{left:w.x,top:w.y,right:v.width*a.scale+w.x,bottom:v.height*a.scale+w.y}}function ur(v,w){return{x:v*a.scale+a.x,y:w*a.scale+a.y}}function ht(){i=!0,Y=window.requestAnimationFrame(vr)}function St(v,w,b){if(gt(v)||gt(w)||gt(b))throw new Error("zoom requires valid numbers");var T=a.scale*b;if(T<f){if(a.scale===f)return;b=f/a.scale}if(T>c){if(a.scale===c)return;b=c/a.scale}var G=ee(v,w);if(a.x=G.x-b*(G.x-a.x),a.y=G.y-b*(G.y-a.y),l&&p===1&&f===1)a.scale*=b,dt();else{var U=dt();U||(a.scale*=b)}Le("zoom"),ht()}function tt(v,w,b){var T=b/a.scale;St(v,w,T)}function cr(v){var w=v.ownerSVGElement;if(!w)throw new Error("ui element is required to be within the scene");var b=v.getBoundingClientRect(),T=b.left+b.width/2,G=b.top+b.height/2,U=w.getBoundingClientRect(),X=U.width/2-T,fe=U.height/2-G;ze(X,fe,!0)}function fr(v,w){ze(v-a.x,w-a.y,!0)}function ze(v,w,b){if(!b)return Et(v,w);Be&&Be.cancel();var T={x:0,y:0},G={x:v,y:w},U=0,X=0;Be=pt(T,G,{step:function(fe){Et(fe.x-U,fe.y-X),U=fe.x,X=fe.y}})}function dr(v,w){ot(),ft(v,w)}function hr(){Nt()}function Mt(){n.addEventListener("mousedown",Rt,{passive:!1}),n.addEventListener("dblclick",Vt,{passive:!1}),n.addEventListener("touchstart",Tt,{passive:!1}),n.addEventListener("keydown",Dt,{passive:!1}),cn.addWheelListener(n,Wt,{passive:!1}),ht()}function Nt(){cn.removeWheelListener(n,Wt),n.removeEventListener("mousedown",Rt),n.removeEventListener("keydown",Dt),n.removeEventListener("dblclick",Vt),n.removeEventListener("touchstart",Tt),Y&&(window.cancelAnimationFrame(Y),Y=0),pe.cancel(),Lt(),Ft(),V.release(),vt()}function vr(){i&&mr()}function mr(){i=!1,t.applyTransform(a),Le("transform"),Y=0}function Dt(v){var w=0,b=0,T=0;if(v.keyCode===38?b=1:v.keyCode===40?b=-1:v.keyCode===37?w=1:v.keyCode===39?w=-1:v.keyCode===189||v.keyCode===109?T=1:(v.keyCode===187||v.keyCode===107)&&(T=-1),!s(v,w,b,T)){if(w||b){v.preventDefault(),v.stopPropagation();var G=n.getBoundingClientRect(),U=Math.min(G.width,G.height),X=.05,fe=U*X*w,Fe=U*X*b;ze(fe,Fe)}if(T){var Re=qt(T*100),U=B?Ke():pr();it(U.x,U.y,Re)}}}function pr(){var v=n.getBoundingClientRect();return{x:v.width/2,y:v.height/2}}function Tt(v){if(gr(v),Ge(),v.touches.length===1)return kr(v,v.touches[0]);v.touches.length===2&&(Ae=Bt(v.touches[0],v.touches[1]),Me=!0,Ct())}function gr(v){e.onTouch&&!e.onTouch(v)||(v.stopPropagation(),v.preventDefault())}function _r(v){Ge(),!(e.onDoubleClick&&!e.onDoubleClick(v))&&(v.preventDefault(),v.stopPropagation())}function kr(v){W=new Date;var w=v.touches[0],b=Ce(w);I=b;var T=ee(b.x,b.y);J=T.x,j=T.y,me=J,Oe=j,pe.cancel(),Ct()}function Ct(){C||(C=!0,document.addEventListener("touchmove",Ot),document.addEventListener("touchend",nt),document.addEventListener("touchcancel",nt))}function Ot(v){if(v.touches.length===1){v.stopPropagation();var w=v.touches[0],b=Ce(w),T=ee(b.x,b.y),G=T.x-J,U=T.y-j;G!==0&&U!==0&&Zt(),J=T.x,j=T.y,ze(G,U)}else if(v.touches.length===2){Me=!0;var X=v.touches[0],fe=v.touches[1],Fe=Bt(X,fe),Re=1+(Fe/Ae-1)*u,Yt=Ce(X),xt=Ce(fe);if(J=(Yt.x+xt.x)/2,j=(Yt.y+xt.y)/2,B){var b=Ke();J=b.x,j=b.y}it(J,j,Re),Ae=Fe,v.stopPropagation(),v.preventDefault()}}function Ge(){A&&(clearTimeout(A),A=0)}function At(v){if(e.onClick){Ge();var w=J-me,b=j-Oe,T=Math.sqrt(w*w+b*b);T>5||(A=setTimeout(function(){A=0,e.onClick(v)},hn))}}function nt(v){if(Ge(),v.touches.length>0){var w=Ce(v.touches[0]),b=ee(w.x,w.y);J=b.x,j=b.y}else{var T=new Date;if(T-k<hn)if(B){var w=Ke();rt(w.x,w.y,d)}else rt(I.x,I.y,d);else T-W<vn&&At(v);k=T,vt(),Ft()}}function Bt(v,w){var b=v.clientX-w.clientX,T=v.clientY-w.clientY;return Math.sqrt(b*b+T*T)}function Vt(v){_r(v);var w=Ce(v);B&&(w=Ke()),rt(w.x,w.y,d)}function Rt(v){if(Ge(),!N(v)){if(P=v,O=new Date,C)return v.stopPropagation(),!1;var w=v.button===1&&window.event!==null||v.button===0;if(w){pe.cancel();var b=Ce(v),T=ee(b.x,b.y);return me=J=T.x,Oe=j=T.y,document.addEventListener("mousemove",Pt),document.addEventListener("mouseup",zt),V.capture(v.target||v.srcElement),!1}}}function Pt(v){if(!C){Zt();var w=Ce(v),b=ee(w.x,w.y),T=b.x-J,G=b.y-j;J=b.x,j=b.y,ze(T,G)}}function zt(){var v=new Date;v-O<vn&&At(P),V.release(),vt(),Lt()}function Lt(){document.removeEventListener("mousemove",Pt),document.removeEventListener("mouseup",zt),K=!1}function Ft(){document.removeEventListener("touchmove",Ot),document.removeEventListener("touchend",nt),document.removeEventListener("touchcancel",nt),K=!1,Me=!1,C=!1}function Wt(v){if(!g(v)){pe.cancel();var w=v.deltaY;v.deltaMode>0&&(w*=100);var b=qt(w);if(b!==1){var T=B?Ke():Ce(v);it(T.x,T.y,b),v.preventDefault()}}}function Ce(v){var w,b,T=n.getBoundingClientRect();return w=v.clientX-T.left,b=v.clientY-T.top,{x:w,y:b}}function rt(v,w,b){var T=a.scale,G={scale:T},U={scale:b*T};pe.cancel(),ot(),Ie=pt(G,U,{step:function(X){tt(v,w,X.scale)},done:yr})}function wr(v,w,b){var T=a.scale,G={scale:T},U={scale:b};pe.cancel(),ot(),Ie=pt(G,U,{step:function(X){tt(v,w,X.scale)}})}function Ke(){var v=n.getBoundingClientRect();return{x:v.width*B.x,y:v.height*B.y}}function it(v,w,b){return pe.cancel(),ot(),St(v,w,b)}function ot(){Ie&&(Ie.cancel(),Ie=null)}function qt(v){var w=Math.sign(v),b=Math.min(.25,Math.abs(E*v/128));return 1-w*b}function Zt(){K||(Le("panstart"),K=!0,pe.start())}function vt(){K&&(Me||pe.stop(),Le("panend"))}function yr(){Le("zoomend")}function Le(v){De.fire(v,De)}}function mn(r){if(r){if(typeof r=="object")return(!We(r.x)||!We(r.y))&&pn(r),r;pn()}}function pn(r){throw console.error(r),new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join(`
`))}function qe(){}function wo(r){var e=typeof r;if(!(e==="undefined"||e==="boolean")){var t=We(r.left)&&We(r.top)&&We(r.bottom)&&We(r.right);if(!t)throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}}function We(r){return Number.isFinite(r)}function gt(r){return Number.isNaN?Number.isNaN(r):r!==r}function yo(){return{start:qe,stop:qe,cancel:qe}}function bo(){if(typeof document>"u")return;var r=document.getElementsByTagName("script");if(!r)return;for(var e,t=0;t<r.length;++t){var n=r[t];if(n.src&&n.src.match(/\bpanzoom(\.min)?\.js/)){e=n;break}}if(!e)return;var o=e.getAttribute("query");if(!o)return;var i=e.getAttribute("name")||"pz",a=Date.now();s();function s(){var c=document.querySelector(o);if(!c){var f=Date.now(),p=f-a;if(p<2e3){setTimeout(s,100);return}console.error("Cannot find the panzoom element",i);return}var d=u(e);console.log(d),window[i]=Qn(c,d)}function u(c){for(var f=c.attributes,p={},d=0;d<f.length;++d){var g=f[d],N=l(g);N&&(p[N.name]=N.value)}return p}function l(c){if(c.name){var f=c.name[0]==="p"&&c.name[1]==="z"&&c.name[2]==="-";if(f){var p=c.name.substr(3),d=JSON.parse(c.value);return{name:p,value:d}}}}}bo();const gn=[{translationKey:"node-gain",internal:"GainGraphNode",category:"audio"},{translationKey:"node-oscillator",internal:"OscillatorNode",category:"audio"},{translationKey:"node-midi-to-values",internal:"MidiToValuesNode",category:"midi"},{translationKey:"node-envelope",internal:"EnvelopeNode",category:"base"},{translationKey:"node-filter-biquad",internal:"BiquadFilterNode",category:"audio"},{translationKey:"node-mixer",internal:"MixerNode",category:"audio"},{translationKey:"node-expression",internal:"ExpressionNode",category:"scripting"},{translationKey:"node-function",internal:"FunctionNode",category:"base"},{translationKey:"node-expression-stream",internal:"StreamExpressionNode",category:"scripting"},{translationKey:"node-polyphonic",internal:"PolyphonicNode",category:"base"},{translationKey:"node-filter-midi",internal:"MidiFilterNode",category:"midi"},{translationKey:"node-pipe-player",internal:"PipePlayerNode",category:"audio"},{translationKey:"node-wavetable-oscillator",internal:"WavetableNode",category:"audio"},{translationKey:"node-portamento",internal:"PortamentoNode",category:"base"},{translationKey:"node-button",internal:"ButtonNode",category:"ui"},{translationKey:"node-rank-player",internal:"RankPlayerNode",category:"audio"}];function _n(r,e,t){const n=r.slice();return n[10]=e[t],n}function kn(r,e,t){const n=r.slice();return n[13]=e[t],n}function wn(r){let e,t,n=[],o=new Map,i,a=r[2][r[10]];const s=u=>u[13].internal;for(let u=0;u<a.length;u+=1){let l=kn(r,a,u),c=s(l);o.set(c,n[u]=yn(c,l))}return{c(){e=S("div"),t=S("div");for(let u=0;u<n.length;u+=1)n[u].c();this.h()},l(u){e=M(u,"DIV",{style:!0,class:!0});var l=y(e);t=M(l,"DIV",{class:!0,style:!0});var c=y(t);for(let f=0;f<n.length;f+=1)n[f].l(c);c.forEach(m),l.forEach(m),this.h()},h(){h(t,"class","menu svelte-1p6wnmf"),F(t,"width",r[0]+"px"),F(e,"position","absolute"),F(e,"left",r[0]+"px"),F(e,"width",r[0]+"px"),h(e,"class","svelte-1p6wnmf")},m(u,l){R(u,e,l),_(e,t);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null);i=!0},p(u,l){l&44&&(a=u[2][u[10]],ye(),n=Pe(n,l,s,1,u,a,o,t,Je,yn,null,kn),be()),(!i||l&1)&&F(t,"width",u[0]+"px"),(!i||l&1)&&F(e,"left",u[0]+"px"),(!i||l&1)&&F(e,"width",u[0]+"px")},i(u){if(!i){for(let l=0;l<a.length;l+=1)z(n[l]);i=!0}},o(u){for(let l=0;l<n.length;l+=1)Z(n[l]);i=!1},d(u){u&&m(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function yn(r,e){let t,n,o,i,a,s;n=new Lr({props:{id:e[13].translationKey}});function u(...l){return e[7](e[13],...l)}return{key:r,first:null,c(){t=S("div"),re(n.$$.fragment),o=Q(),this.h()},l(l){t=M(l,"DIV",{class:!0});var c=y(t);ie(n.$$.fragment,c),o=$(c),c.forEach(m),this.h()},h(){h(t,"class","item svelte-1p6wnmf"),this.first=t},m(l,c){R(l,t,c),oe(n,t,null),_(t,o),i=!0,a||(s=L(t,"click",u),a=!0)},p(l,c){e=l},i(l){i||(z(n.$$.fragment,l),i=!0)},o(l){Z(n.$$.fragment,l),i=!1},d(l){l&&m(t),ae(n),a=!1,s()}}}function bn(r,e){let t,n,o=e[10]+"",i,a,s,u,l,c,f,p,d=e[1]===e[10]&&wn(e);function g(){return e[8](e[10])}return{key:r,first:null,c(){t=S("div"),d&&d.c(),n=Q(),i=te(o),a=Q(),s=S("span"),u=te("▸"),l=Q(),this.h()},l(N){t=M(N,"DIV",{class:!0});var E=y(t);d&&d.l(E),n=$(E),i=ne(E,o),a=$(E),s=M(E,"SPAN",{style:!0,class:!0});var B=y(s);u=ne(B,"▸"),B.forEach(m),l=$(E),E.forEach(m),this.h()},h(){F(s,"float","right"),F(s,"margin-left","4px"),h(s,"class","svelte-1p6wnmf"),h(t,"class","category item svelte-1p6wnmf"),this.first=t},m(N,E){R(N,t,E),d&&d.m(t,null),_(t,n),_(t,i),_(t,a),_(t,s),_(s,u),_(t,l),c=!0,f||(p=[L(t,"mouseenter",g),L(t,"mousedown",Ee(e[6]))],f=!0)},p(N,E){e=N,e[1]===e[10]?d?(d.p(e,E),E&2&&z(d,1)):(d=wn(e),d.c(),z(d,1),d.m(t,n)):d&&(ye(),Z(d,1,1,()=>{d=null}),be())},i(N){c||(z(d),c=!0)},o(N){Z(d),c=!1},d(N){N&&m(t),d&&d.d(),f=!1,_e(p)}}}function Eo(r){let e,t=[],n=new Map,o,i=r[3];const a=s=>s[10];for(let s=0;s<i.length;s+=1){let u=_n(r,i,s),l=a(u);n.set(l,t[s]=bn(l,u))}return{c(){e=S("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=M(s,"DIV",{class:!0,style:!0});var u=y(e);for(let l=0;l<t.length;l+=1)t[l].l(u);u.forEach(m),this.h()},h(){h(e,"class","menu svelte-1p6wnmf"),F(e,"width",r[0]+"px")},m(s,u){R(s,e,u);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null);o=!0},p(s,[u]){u&63&&(i=s[3],ye(),t=Pe(t,u,a,1,s,i,n,e,Je,bn,null,_n),be()),(!o||u&1)&&F(e,"width",s[0]+"px")},i(s){if(!o){for(let u=0;u<i.length;u+=1)z(t[u]);o=!0}},o(s){for(let u=0;u<t.length;u+=1)Z(t[u]);o=!1},d(s){s&&m(e);for(let u=0;u<t.length;u+=1)t[u].d()}}}function Io(r,e,t){const n=Ye();let{menuWidth:o=250}=e,i=null,a=gn.reduce((d,g)=>({...d,[g.category]:[]}),{});for(let d of gn)a[d.category].push(d);for(let d in a)a[d].sort((g,N)=>g.translationKey.localeCompare(N.translationKey));let s=Object.keys(a);s.sort();const u=d=>{t(1,i=d)},l=(d,g)=>{n("selected",{value:d,clientX:g.clientX,clientY:g.clientY})};function c(d){ge.call(this,r,d)}const f=(d,g)=>l(d.internal,g),p=d=>u(d);return r.$$set=d=>{"menuWidth"in d&&t(0,o=d.menuWidth)},[o,i,a,s,u,l,c,f,p]}class So extends de{constructor(e){super(),he(this,e,Io,Eo,ve,{menuWidth:0})}}function En(r,e,t){const n=r.slice();return n[4]=e[t],n}function In(r,e){let t,n=e[4].name+"",o,i,a,s;function u(){return e[2](e[4])}return{key:r,first:null,c(){t=S("a"),o=te(n),i=te(" / "),this.h()},l(l){t=M(l,"A",{href:!0});var c=y(t);o=ne(c,n),c.forEach(m),i=ne(l," / "),this.h()},h(){h(t,"href","#"),this.first=t},m(l,c){R(l,t,c),_(t,o),R(l,i,c),a||(s=L(t,"click",u),a=!0)},p(l,c){e=l,c&1&&n!==(n=e[4].name+"")&&ke(o,n)},d(l){l&&m(t),l&&m(i),a=!1,s()}}}function Mo(r){let e=[],t=new Map,n,o=r[0];const i=a=>a[4].index;for(let a=0;a<o.length;a+=1){let s=En(r,o,a),u=i(s);t.set(u,e[a]=In(u,s))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();n=ce()},l(a){for(let s=0;s<e.length;s+=1)e[s].l(a);n=ce()},m(a,s){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(a,s);R(a,n,s)},p(a,[s]){s&3&&(o=a[0],e=Pe(e,s,i,1,a,o,t,n.parentNode,zn,In,n,En))},i:H,o:H,d(a){for(let s=0;s<e.length;s+=1)e[s].d(a);a&&m(n)}}}function No(r,e,t){let{path:n=[{name:"root",index:{index:0,generation:0}}]}=e;const o=Ye(),i=s=>{o("click",{index:s})},a=s=>i(s.index);return r.$$set=s=>{"path"in s&&t(0,n=s.path)},[n,i,a]}class Do extends de{constructor(e){super(),he(this,e,No,Mo,ve,{path:0})}}function To(r){let t=r.nodeStore.getValue().filter(([n,o])=>n.data.uiData.selected);for(let[n,o]of t)n.data.uiData={...n.data.uiData,selected:!1},r.updateNode(o);return t.map(([n,o])=>o)}function lt(r,e,t){const n=r.getTransform(),o=(e-n.x)/n.scale,i=(t-n.y)/n.scale;return[o,i]}function Co(r,e,t,n){let o=r.getBoundingClientRect(),i=t-o.x,a=n-o.y;return lt(e,i,a)}function Sn(r,e,t){const n=r.slice();return n[36]=e[t][0],n[37]=e[t][1],n[38]=e[t][2],n}function Mn(r,e,t){const n=r.slice();return n[36]=e[t][0],n[41]=e[t][1],n}function Nn(r,e){let t,n,o;const i=[e[22](e[41])];let a={};for(let s=0;s<i.length;s+=1)a=Fn(a,i[s]);return n=new bt({props:a}),{key:r,first:null,c(){t=ce(),re(n.$$.fragment),this.h()},l(s){t=ce(),ie(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,u){R(s,t,u),oe(n,s,u),o=!0},p(s,u){e=s;const l=u[0]&4198400?Wn(i,[qn(e[22](e[41]))]):{};n.$set(l)},i(s){o||(z(n.$$.fragment,s),o=!0)},o(s){Z(n.$$.fragment,s),o=!1},d(s){s&&m(t),ae(n,s)}}}function Dn(r){let e,t,n,o;const i=[Ao,Oo],a=[];function s(u,l){return u[9].direction.variant==="Input"?0:1}return e=s(r),t=a[e]=i[e](r),{c(){t.c(),n=ce()},l(u){t.l(u),n=ce()},m(u,l){a[e].m(u,l),R(u,n,l),o=!0},p(u,l){let c=e;e=s(u),e===c?a[e].p(u,l):(ye(),Z(a[c],1,1,()=>{a[c]=null}),be(),t=a[e],t?t.p(u,l):(t=a[e]=i[e](u),t.c()),z(t,1),t.m(n.parentNode,n))},i(u){o||(z(t),o=!0)},o(u){Z(t),o=!1},d(u){a[e].d(u),u&&m(n)}}}function Oo(r){let e,t;const n=[r[8]];let o={};for(let i=0;i<n.length;i+=1)o=Fn(o,n[i]);return e=new bt({props:o}),{c(){re(e.$$.fragment)},l(i){ie(e.$$.fragment,i)},m(i,a){oe(e,i,a),t=!0},p(i,a){const s=a[0]&256?Wn(n,[qn(i[8])]):{};e.$set(s)},i(i){t||(z(e.$$.fragment,i),t=!0)},o(i){Z(e.$$.fragment,i),t=!1},d(i){ae(e,i)}}}function Ao(r){let e,t;return e=new bt({props:{x1:r[8].x2,y1:r[8].y2,x2:r[8].x1,y2:r[8].y1}}),{c(){re(e.$$.fragment)},l(n){ie(e.$$.fragment,n)},m(n,o){oe(e,n,o),t=!0},p(n,o){const i={};o[0]&256&&(i.x1=n[8].x2),o[0]&256&&(i.y1=n[8].y2),o[0]&256&&(i.x2=n[8].x1),o[0]&256&&(i.y2=n[8].y1),e.$set(i)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){Z(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Tn(r,e){let t,n,o;return n=new Ai({props:{nodes:e[4],wrapper:e[37],nodeIndex:e[38],onMousedown:e[19],registry:e[3]}}),n.$on("socketMousedown",e[20]),n.$on("socketMouseup",e[21]),n.$on("changeGraph",e[24]),{key:r,first:null,c(){t=ce(),re(n.$$.fragment),this.h()},l(i){t=ce(),ie(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){R(i,t,a),oe(n,i,a),o=!0},p(i,a){e=i;const s={};a[0]&16&&(s.nodes=e[4]),a[0]&2048&&(s.wrapper=e[37]),a[0]&2048&&(s.nodeIndex=e[38]),a[0]&8&&(s.registry=e[3]),n.$set(s)},i(i){o||(z(n.$$.fragment,i),o=!0)},o(i){Z(n.$$.fragment,i),o=!1},d(i){i&&m(t),ae(n,i)}}}function Cn(r){let e,t,n;return t=new So({}),t.$on("selected",r[18]),{c(){e=S("div"),re(t.$$.fragment),this.h()},l(o){e=M(o,"DIV",{style:!0});var i=y(e);ie(t.$$.fragment,i),i.forEach(m),this.h()},h(){F(e,"position","absolute"),F(e,"left",r[7].x+"px"),F(e,"top",r[7].y+"px")},m(o,i){R(o,e,i),oe(t,e,null),n=!0},p(o,i){(!n||i[0]&128)&&F(e,"left",o[7].x+"px"),(!n||i[0]&128)&&F(e,"top",o[7].y+"px")},i(o){n||(z(t.$$.fragment,o),n=!0)},o(o){Z(t.$$.fragment,o),n=!1},d(o){o&&m(e),ae(t)}}}function Bo(r){let e,t,n,o=[],i=new Map,a,s,u,l=[],c=new Map,f,p,d,g,N,E,B,V=r[12];const Y=O=>O[36];for(let O=0;O<V.length;O+=1){let I=Mn(r,V,O),C=Y(I);i.set(C,o[O]=Nn(C,I))}let k=r[8]&&Dn(r),W=r[11];const A=O=>O[36];for(let O=0;O<W.length;O+=1){let I=Sn(r,W,O),C=A(I);c.set(C,l[O]=Tn(C,I))}d=new Do({props:{path:r[10]}}),d.$on("click",r[23]);let P=r[7].visible&&Cn(r);return{c(){e=S("div"),t=S("div"),n=S("div");for(let O=0;O<o.length;O+=1)o[O].c();a=Q(),k&&k.c(),s=Q(),u=S("div");for(let O=0;O<l.length;O+=1)l[O].c();f=Q(),p=S("div"),re(d.$$.fragment),g=Q(),P&&P.c(),this.h()},l(O){e=M(O,"DIV",{class:!0,style:!0});var I=y(e);t=M(I,"DIV",{style:!0});var C=y(t);n=M(C,"DIV",{style:!0});var K=y(n);for(let me=0;me<o.length;me+=1)o[me].l(K);a=$(K),k&&k.l(K),K.forEach(m),s=$(C),u=M(C,"DIV",{style:!0});var J=y(u);for(let me=0;me<l.length;me+=1)l[me].l(J);J.forEach(m),C.forEach(m),f=$(I),p=M(I,"DIV",{class:!0,style:!0});var j=y(p);ie(d.$$.fragment,j),j.forEach(m),g=$(I),P&&P.l(I),I.forEach(m),this.h()},h(){F(n,"position","absolute"),F(n,"height","0px"),F(n,"z-index","-10"),F(u,"z-index","10"),F(t,"position","relative"),F(t,"height","0px"),h(p,"class","breadcrumb-container svelte-f9tha7"),F(p,"width",r[0]-16+"px"),h(e,"class","editor svelte-f9tha7"),F(e,"width",r[0]+"px"),F(e,"height",r[1]+"px")},m(O,I){R(O,e,I),_(e,t),_(t,n);for(let C=0;C<o.length;C+=1)o[C]&&o[C].m(n,null);_(n,a),k&&k.m(n,null),_(t,s),_(t,u);for(let C=0;C<l.length;C+=1)l[C]&&l[C].m(u,null);r[28](t),_(e,f),_(e,p),oe(d,p,null),_(e,g),P&&P.m(e,null),r[29](e),N=!0,E||(B=[L(window,"mousedown",r[16]),L(window,"mousemove",r[14]),L(window,"mouseup",r[17]),L(e,"keydown",r[13]),L(e,"contextmenu",Mr(r[15]))],E=!0)},p(O,I){I[0]&4198400&&(V=O[12],ye(),o=Pe(o,I,Y,1,O,V,i,n,Je,Nn,a,Mn),be()),O[8]?k?(k.p(O,I),I[0]&256&&z(k,1)):(k=Dn(O),k.c(),z(k,1),k.m(n,null)):k&&(ye(),Z(k,1,1,()=>{k=null}),be()),I[0]&20449304&&(W=O[11],ye(),l=Pe(l,I,A,1,O,W,c,u,Je,Tn,null,Sn),be());const C={};I[0]&1024&&(C.path=O[10]),d.$set(C),(!N||I[0]&1)&&F(p,"width",O[0]-16+"px"),O[7].visible?P?(P.p(O,I),I[0]&128&&z(P,1)):(P=Cn(O),P.c(),z(P,1),P.m(e,null)):P&&(ye(),Z(P,1,1,()=>{P=null}),be()),(!N||I[0]&1)&&F(e,"width",O[0]+"px"),(!N||I[0]&2)&&F(e,"height",O[1]+"px")},i(O){if(!N){for(let I=0;I<V.length;I+=1)z(o[I]);z(k);for(let I=0;I<W.length;I+=1)z(l[I]);z(d.$$.fragment,O),z(P),N=!0}},o(O){for(let I=0;I<o.length;I+=1)Z(o[I]);Z(k);for(let I=0;I<l.length;I+=1)Z(l[I]);Z(d.$$.fragment,O),Z(P),N=!1},d(O){O&&m(e);for(let I=0;I<o.length;I+=1)o[I].d();k&&k.d();for(let I=0;I<l.length;I+=1)l[I].d();r[28](null),ae(d),P&&P.d(),r[29](null),E=!1,_e(B)}}}function Vo(r,e,t){let n,o=H,i=()=>(o(),o=Nr(l,D=>t(4,n=D)),l);r.$$.on_destroy.push(()=>o());let{width:a=400}=e,{height:s=400}=e,{ipcSocket:u}=e,{activeGraph:l}=e;i();let{graphManager:c}=e,{socketRegistry:f}=e,p=[],d;u.requestGraph({index:0,generation:0});let g,N,E=null,B=!1,V={visible:!1,x:0,y:0},Y=null,k,W=[{name:"root",index:{index:0,generation:0}}];const A=D=>{if(D.ctrlKey)switch(D.key){case"z":D.shiftKey?u.redo():u.undo();break;case"y":u.redo();break}else switch(D.key){case"Delete":const q=n.nodeStore.getValue().filter(([{data:x},we])=>x==null?void 0:x.uiData.selected).map(([x,we])=>we);for(let x of q)u.removeNode(n.graphIndex,x);break}},P=({clientX:D,clientY:q})=>{let[x,we]=Co(g,d,D,q);if(E){let Se=n.getNode(E.node);B=!0,Se.uiData={...Se.uiData,x:x-E.offset[0],y:we-E.offset[1]},n.updateNode(E.node),n.update()}else Y&&(t(8,Y.x2=x,Y),t(8,Y.y2=we,Y))},O=D=>(t(7,V.visible=!0,V),t(7,V.x=D.clientX-125,V),t(7,V.y=D.clientY,V),!1),I=D=>{t(7,V.visible=!1,V)},C=()=>{E&&B&&(n.markNodeAsUpdated(E.node),n.update(),B=!1),n.writeChangedNodesToServer(),d.resume(),E=null,t(8,Y=null)};function K(D){let q=g.getBoundingClientRect(),x=D.detail.clientX-q.x,we=D.detail.clientY-q.y,[Se,Te]=lt(d,x,we);u.createNode(n.graphIndex,D.detail.value,{x:Se-Ar/2,y:Te-30}),t(7,V.visible=!1,V)}let J,j;function me(D,q){if(q.button===0){let x=g.getBoundingClientRect(),we=q.clientX-x.x,Se=q.clientY-x.y,[Te,Ve]=lt(d,we,Se);d.pause();let ee=n.getNode(D);E={node:D,offset:[Te-ee.uiData.x,Ve-ee.uiData.y]};let xe=To(n);ee.uiData={...ee.uiData,selected:!0},u.updateNodesUi(n,[...xe,D])}}function Oe(D){let q=D.detail,x=g.getBoundingClientRect(),we=q.event.clientX-x.x,Se=q.event.clientY-x.y,[Te,Ve]=lt(d,we,Se);if(q.direction.variant==="Input"){let ee=n.getNodeInputConnection(q.vertexIndex,q.socket);if(ee){let xe={fromNode:ee.fromNode,toNode:q.vertexIndex,data:{fromSocket:ee.fromSocket,toSocket:ee.toSocket}};u.disconnectNode(n.graphIndex,xe),t(9,k={index:ee.fromNode,direction:{variant:"Output"},socket:ee.fromSocket}),n.getNode(ee.fromNode);const et=n.getNodeSocketXy(ee.fromNode,ee.fromSocket,{variant:"Output"});t(8,Y={x1:et.x,y1:et.y,x2:Te,y2:Ve});return}}t(9,k={index:q.vertexIndex,direction:q.direction,socket:q.socket}),t(8,Y={x1:Te,y1:Ve,x2:Te,y2:Ve})}function Ae(D){let q=D.detail;if(q.vertexIndex.index===k.index.index||q.direction===k.direction)return;let x;k.direction.variant==="Input"?x={fromNode:q.vertexIndex,toNode:k.index,data:{fromSocket:q.socket,toSocket:k.socket}}:x={fromNode:k.index,toNode:q.vertexIndex,data:{fromSocket:k.socket,toSocket:q.socket}},u.connectNode(n.graphIndex,x)}function pe(D){const q=n.getNodeSocketXy(D.fromNode,D.data.fromSocket,{variant:"Output"}),x=n.getNodeSocketXy(D.toNode,D.data.toSocket,{variant:"Input"});return{x1:q.x,y1:q.y,x2:x.x,y2:x.y}}async function Be(D){for(;W.length>1&&W[W.length-1].index.index!==D.detail.index.index;)W.pop();let q=await c.getGraph(D.detail.index);l.next(q),t(10,W)}async function Ie(D,q){let x=await c.getGraph(D);l.next(x),t(10,W=[...W,{name:q,index:D}])}function Me(D){const q=D.detail.graphIndex,x=D.detail.nodeTitle;Ie(q,x)}Ln(async()=>{d=ko(N)});function Ne(D){st[D?"unshift":"push"](()=>{N=D,t(6,N)})}function De(D){st[D?"unshift":"push"](()=>{g=D,t(5,g)})}return r.$$set=D=>{"width"in D&&t(0,a=D.width),"height"in D&&t(1,s=D.height),"ipcSocket"in D&&t(25,u=D.ipcSocket),"activeGraph"in D&&i(t(2,l=D.activeGraph)),"graphManager"in D&&t(26,c=D.graphManager),"socketRegistry"in D&&t(3,f=D.socketRegistry)},r.$$.update=()=>{r.$$.dirty[0]&134217744&&(p.length>0&&p.forEach(D=>D.unsubscribe()),t(27,p=[n.keyedNodeStore.subscribe(D=>{t(11,J=D)}),n.keyedConnectionStore.subscribe(D=>{t(12,j=D)})]))},[a,s,l,f,n,g,N,V,Y,k,W,J,j,A,P,O,I,C,K,me,Oe,Ae,pe,Be,Me,u,c,p,Ne,De]}class Ro extends de{constructor(e){super(),he(this,e,Vo,Bo,ve,{width:0,height:1,ipcSocket:25,activeGraph:2,graphManager:26,socketRegistry:3},null,[-1,-1])}}function On(r,e,t){const n=r.slice();return n[15]=e[t],n}function An(r,e,t){const n=r.slice();return n[15]=e[t],n}function Bn(r){let e,t,n,o,i=r[2],a=[];for(let s=0;s<i.length;s+=1)a[s]=Vn(An(r,i,s));return{c(){e=te(`Inputs:
    `),t=S("select");for(let s=0;s<a.length;s+=1)a[s].c();this.h()},l(s){e=ne(s,`Inputs:
    `),t=M(s,"SELECT",{});var u=y(t);for(let l=0;l<a.length;l+=1)a[l].l(u);u.forEach(m),this.h()},h(){r[4]===void 0&&Zn(()=>r[10].call(t))},m(s,u){R(s,e,u),R(s,t,u);for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(t,null);Ze(t,r[4],!0),n||(o=[L(t,"change",r[10]),L(t,"change",r[6])],n=!0)},p(s,u){if(u&4){i=s[2];let l;for(l=0;l<i.length;l+=1){const c=An(s,i,l);a[l]?a[l].p(c,u):(a[l]=Vn(c),a[l].c(),a[l].m(t,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=i.length}u&20&&Ze(t,s[4])},d(s){s&&m(e),s&&m(t),Yn(a,s),n=!1,_e(o)}}}function Vn(r){let e,t=r[15][1].name+"",n,o;return{c(){e=S("option"),n=te(t),this.h()},l(i){e=M(i,"OPTION",{});var a=y(e);n=ne(a,t),a.forEach(m),this.h()},h(){e.__value=o=r[15][0],e.value=e.__value},m(i,a){R(i,e,a),_(e,n)},p(i,a){a&4&&t!==(t=i[15][1].name+"")&&ke(n,t),a&4&&o!==(o=i[15][0])&&(e.__value=o,e.value=e.__value)},d(i){i&&m(e)}}}function Rn(r){let e,t,n,o,i=r[3],a=[];for(let s=0;s<i.length;s+=1)a[s]=Pn(On(r,i,s));return{c(){e=te(`Outputs:
    `),t=S("select");for(let s=0;s<a.length;s+=1)a[s].c();this.h()},l(s){e=ne(s,`Outputs:
    `),t=M(s,"SELECT",{});var u=y(t);for(let l=0;l<a.length;l+=1)a[l].l(u);u.forEach(m),this.h()},h(){r[5]===void 0&&Zn(()=>r[11].call(t))},m(s,u){R(s,e,u),R(s,t,u);for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(t,null);Ze(t,r[5],!0),n||(o=[L(t,"change",r[11]),L(t,"change",r[7])],n=!0)},p(s,u){if(u&8){i=s[3];let l;for(l=0;l<i.length;l+=1){const c=On(s,i,l);a[l]?a[l].p(c,u):(a[l]=Pn(c),a[l].c(),a[l].m(t,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=i.length}u&40&&Ze(t,s[5])},d(s){s&&m(e),s&&m(t),Yn(a,s),n=!1,_e(o)}}}function Pn(r){let e,t=r[15][1].name+"",n,o;return{c(){e=S("option"),n=te(t),this.h()},l(i){e=M(i,"OPTION",{});var a=y(e);n=ne(a,t),a.forEach(m),this.h()},h(){e.__value=o=r[15][0],e.value=e.__value},m(i,a){R(i,e,a),_(e,n)},p(i,a){a&8&&t!==(t=i[15][1].name+"")&&ke(n,t),a&8&&o!==(o=i[15][0])&&(e.__value=o,e.value=e.__value)},d(i){i&&m(e)}}}function Po(r){let e,t,n=r[0]&&Bn(r),o=r[1]&&Rn(r);return{c(){n&&n.c(),e=Q(),o&&o.c(),t=ce()},l(i){n&&n.l(i),e=$(i),o&&o.l(i),t=ce()},m(i,a){n&&n.m(i,a),R(i,e,a),o&&o.m(i,a),R(i,t,a)},p(i,[a]){i[0]?n?n.p(i,a):(n=Bn(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),i[1]?o?o.p(i,a):(o=Rn(i),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},i:H,o:H,d(i){n&&n.d(i),i&&m(e),o&&o.d(i),i&&m(t)}}}function zo(){alert("Cannot run this program without MIDI access.")}function Lo(r,e,t){let{inputMidiDevice:n=void 0}=e,{outputMidiDevice:o=void 0}=e,{listInputs:i=!1}=e,{listOutputs:a=!1}=e,s,u=[],l=[],c,f;function p(){i&&t(2,u=[...s.inputs.entries()]),a&&t(3,l=[...s.outputs.entries()])}function d(V){s=V,s.addEventListener("statechange",p),p()}function g(){if(i){const V=s.inputs.get(c);V&&t(8,n=V)}}function N(){if(a){const V=s.outputs.get(f);V&&t(9,o=V)}}Ln(async()=>{navigator.requestMIDIAccess().then(d,zo)});function E(){c=Gt(this),t(4,c),t(2,u)}function B(){f=Gt(this),t(5,f),t(3,l)}return r.$$set=V=>{"inputMidiDevice"in V&&t(8,n=V.inputMidiDevice),"outputMidiDevice"in V&&t(9,o=V.outputMidiDevice),"listInputs"in V&&t(0,i=V.listInputs),"listOutputs"in V&&t(1,a=V.listOutputs)},[i,a,u,l,c,f,g,N,n,o,E,B]}class Fo extends de{constructor(e){super(),he(this,e,Lo,Po,ve,{inputMidiDevice:8,outputMidiDevice:9,listInputs:0,listOutputs:1})}}function Wo(r){let e,t,n,o,i;function a(u){r[3](u)}let s={listInputs:!0,listOutputs:!1};return r[0]!==void 0&&(s.inputMidiDevice=r[0]),n=new Fo({props:s}),st.push(()=>Dr(n,"inputMidiDevice",a)),{c(){e=S("div"),t=te("Select a device: "),re(n.$$.fragment)},l(u){e=M(u,"DIV",{});var l=y(e);t=ne(l,"Select a device: "),ie(n.$$.fragment,l),l.forEach(m)},m(u,l){R(u,e,l),_(e,t),oe(n,e,null),i=!0},p(u,[l]){const c={};!o&&l&1&&(o=!0,c.inputMidiDevice=u[0],Tr(()=>o=!1)),n.$set(c)},i(u){i||(z(n.$$.fragment,u),i=!0)},o(u){Z(n.$$.fragment,u),i=!1},d(u){u&&m(e),ae(n)}}}function qo(r,e,t){let{socket:n}=e,o,i;function a(s){o=s,t(0,o),t(2,i),t(1,n)}return r.$$set=s=>{"socket"in s&&t(1,n=s.socket)},r.$$.update=()=>{r.$$.dirty&7&&o&&(i&&t(2,i.onmidimessage=()=>{},i),t(0,o.onmidimessage=s=>{const u=s.data;n.sendRaw({type:"midi",payload:u})},o),t(2,i=o))},[o,n,i,a]}class Zo extends de{constructor(e){super(),he(this,e,qo,Wo,ve,{socket:1})}}function Yo(r){let e,t;return e=new Zo({props:{socket:r[0].socket}}),{c(){re(e.$$.fragment)},l(n){ie(e.$$.fragment,n)},m(n,o){oe(e,n,o),t=!0},p(n,o){const i={};o&1&&(i.socket=n[0].socket),e.$set(i)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){Z(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function xo(r){let e,t;return e=new Ro({props:{width:r[3]-48,height:r[2],activeGraph:r[5],graphManager:r[0].graphManager,ipcSocket:r[0].socket,socketRegistry:r[0].socketRegistry}}),{c(){re(e.$$.fragment)},l(n){ie(e.$$.fragment,n)},m(n,o){oe(e,n,o),t=!0},p(n,o){const i={};o&8&&(i.width=n[3]-48),o&4&&(i.height=n[2]),o&1&&(i.graphManager=n[0].graphManager),o&1&&(i.ipcSocket=n[0].socket),o&1&&(i.socketRegistry=n[0].socketRegistry),e.$set(i)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){Z(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Go(r){let e,t,n,o,i,a;t=new $r({props:{section:r[1]}}),t.$on("click",r[7]);const s=[xo,Yo],u=[];function l(c,f){return c[1]==="nodeEditor"?0:c[1]==="settings"?1:-1}return~(o=l(r))&&(i=u[o]=s[o](r)),{c(){e=S("div"),re(t.$$.fragment),n=Q(),i&&i.c(),this.h()},l(c){e=M(c,"DIV",{style:!0});var f=y(e);ie(t.$$.fragment,f),n=$(f),i&&i.l(f),f.forEach(m),this.h()},h(){F(e,"display","flex")},m(c,f){R(c,e,f),oe(t,e,null),_(e,n),~o&&u[o].m(e,null),a=!0},p(c,[f]){const p={};f&2&&(p.section=c[1]),t.$set(p);let d=o;o=l(c),o===d?~o&&u[o].p(c,f):(i&&(ye(),Z(u[d],1,1,()=>{u[d]=null}),be()),~o?(i=u[o],i?i.p(c,f):(i=u[o]=s[o](c),i.c()),z(i,1),i.m(e,null)):i=null)},i(c){a||(z(t.$$.fragment,c),z(i),a=!0)},o(c){Z(t.$$.fragment,c),Z(i),a=!1},d(c){c&&m(e),ae(t),~o&&u[o].d()}}}function Ko(r,e,t){let n,o,i,{data:a}=e,s=a.windowDimensions;kt(r,s,f=>t(6,i=f));let u="nodeEditor",l=new Br(a.graphManager.getRootGraph());const c=f=>t(1,u=f.detail);return r.$$set=f=>{"data"in f&&t(0,a=f.data)},r.$$.update=()=>{r.$$.dirty&64&&t(3,n=i.width),r.$$.dirty&64&&t(2,o=i.height)},[a,u,o,n,s,l,i,c]}class Jo extends de{constructor(e){super(),he(this,e,Ko,Go,ve,{data:0})}}export{Jo as default};
